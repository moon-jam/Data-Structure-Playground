import{j as t,m as Oe,c as bt,X as oe,I as Ue,S as mt,B as vt,d as wt,P as jt,e as Nt,f as Ae,T as yt,g as kt,h as St,M as Ct,i as It,k as Fe,R as zt,U as ze,l as $t,n as Rt,o as Je,p as Tt,q as Lt,C as qe,r as Mt,s as Et,t as $e,u as Re}from"./vendor-ui-B9wcmvUv.js";import{r as n}from"./vendor-react-B3rwDall.js";import{u as Bt}from"./index-CLFqJ218.js";const p=[];for(let s=0;s<256;++s)p.push((s+256).toString(16).slice(1));function _t(s,e=0){return(p[s[e+0]]+p[s[e+1]]+p[s[e+2]]+p[s[e+3]]+"-"+p[s[e+4]]+p[s[e+5]]+"-"+p[s[e+6]]+p[s[e+7]]+"-"+p[s[e+8]]+p[s[e+9]]+"-"+p[s[e+10]]+p[s[e+11]]+p[s[e+12]]+p[s[e+13]]+p[s[e+14]]+p[s[e+15]]).toLowerCase()}let Te;const Pt=new Uint8Array(16);function Vt(){if(!Te){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Te=crypto.getRandomValues.bind(crypto)}return Te(Pt)}const Ht=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qe={randomUUID:Ht};function Wt(s,e,i){s=s||{};const a=s.random??s.rng?.()??Vt();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,_t(a)}function Dt(s,e,i){return Qe.randomUUID&&!s?Qe.randomUUID():Wt(s)}class C{id;value;height;left;right;constructor(e,i){this.id=i||Dt(),this.value=e,this.height=1,this.left=null,this.right=null}static fromJSON(e){if(!e)return null;const i=new C(e.value,e.id);return i.height=e.height,i.left=C.fromJSON(e.left),i.right=C.fromJSON(e.right),i}clone(){const e=new C(this.value,this.id);return e.height=this.height,this.left&&(e.left=this.left.clone()),this.right&&(e.right=this.right.clone()),e}}class Ot{root;steps;constructor(){this.root=null,this.steps=[]}toJSON(){return JSON.stringify(this.root)}fromJSON(e){!e||e==="null"?this.root=null:this.root=C.fromJSON(JSON.parse(e))}addStep(e,i,a){this.steps.push({type:e,message:i,targetIds:a,payload:{rootSnapshot:this.root?this.root.clone():null}})}height(e){return e?e.height:0}getBalance(e){return e?this.height(e.left)-this.height(e.right):0}patchTree(e,i){if(this.root===e)this.root=i;else{const a=this.findParent(this.root,e.value);a&&(a.left===e?a.left=i:a.right=i)}}insert(e){return this.steps=[],this.root?this.root=this._insert(this.root,e):(this.root=new C(e),this.addStep("insert",`Created root node ${e}`,[this.root.id])),this.addStep("complete",`Value ${e} insertion finished`),this.steps}_insert(e,i){if(this.addStep("highlight",`Search: ${i} at ${e.value}`,[e.id]),i<e.value)e.left?e.left=this._insert(e.left,i):(e.left=new C(i),this.addStep("insert",`Connected ${i} to the left of ${e.value}`,[e.left.id]));else if(i>e.value)e.right?e.right=this._insert(e.right,i):(e.right=new C(i),this.addStep("insert",`Connected ${i} to the right of ${e.value}`,[e.right.id]));else return e;e.height=Math.max(this.height(e.left),this.height(e.right))+1;const a=this.getBalance(e);return Math.abs(a)>1?a>1?this.getBalance(e.left)>=0?this.rightRotate(e,!1):(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):this.getBalance(e.right)<=0?this.leftRotate(e,!1):(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):(this.addStep("highlight",`Node ${e.value} balanced (BF: ${a})`,[e.id]),e)}insertManual(e){return this.steps=[],this.root?this.root=this._insertBST(this.root,e):(this.root=new C(e),this.addStep("insert",`Created root node ${e}`,[this.root.id])),this.addStep("complete","Manual insertion done"),this.steps}_insertBST(e,i){return i<e.value?e.left?e.left=this._insertBST(e.left,i):e.left=new C(i):i>e.value&&(e.right?e.right=this._insertBST(e.right,i):e.right=new C(i)),e.height=Math.max(this.height(e.left),this.height(e.right))+1,e}deleteManual(e){return this.steps=[],this.root=this._delete(this.root,e,!1),this.addStep("complete","Manual deletion done"),this.steps}rotateNode(e,i){this.steps=[];const a=this.findParent(this.root,e);let c=this.root?.value===e?this.root:a?.left?.value===e?a?.left:a?.right;return c?i==="left"&&!c.right?[{type:"error",message:"error.noRightChild",payload:{val:e}}]:i==="right"&&!c.left?[{type:"error",message:"error.noLeftChild",payload:{val:e}}]:(i==="left"?this.leftRotate(c,!1):this.rightRotate(c,!1),this.updateAllHeights(this.root),this.addStep("complete","Rotation finished"),this.steps):this.steps}updateAllHeights(e){return e?(e.height=Math.max(this.updateAllHeights(e.left),this.updateAllHeights(e.right))+1,e.height):0}rightRotate(e,i=!0){const a=e.left,c=a.right;return a.right=e,e.left=c,e.height=Math.max(this.height(e.left),this.height(e.right))+1,a.height=Math.max(this.height(a.left),this.height(a.right))+1,this.patchTree(e,a),i||this.addStep("rotate",`Right rotating at ${e.value}`,[e.id,a.id]),a}leftRotate(e,i=!0){const a=e.right,c=a.left;return a.left=e,e.right=c,e.height=Math.max(this.height(e.left),this.height(e.right))+1,a.height=Math.max(this.height(a.left),this.height(a.right))+1,this.patchTree(e,a),i||this.addStep("rotate",`Left rotating at ${e.value}`,[e.id,a.id]),a}delete(e){return this.steps=[],this.root=this._delete(this.root,e,!0),this.addStep("complete",`Value ${e} deletion finished`),this.steps}_delete(e,i,a){if(!e)return null;if(this.addStep("highlight",`Searching ${i}...`,[e.id]),i<e.value)e.left=this._delete(e.left,i,a);else if(i>e.value)e.right=this._delete(e.right,i,a);else if(this.addStep("message",`Found ${i}. Removing...`),!e.left||!e.right)e=e.left||e.right;else{const x=this.minValueNode(e.right);this.addStep("message",`Finding successor: ${x.value}`),e.value=x.value,e.id=x.id,e.right=this._delete(e.right,x.value,a)}if(!e)return null;if(e.height=Math.max(this.height(e.left),this.height(e.right))+1,!a)return e;const c=this.getBalance(e);return Math.abs(c)>1?c>1?this.getBalance(e.left)>=0?this.rightRotate(e,!1):(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):this.getBalance(e.right)<=0?this.leftRotate(e,!1):(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):e}minValueNode(e){let i=e;for(;i.left;)i=i.left;return i}findParent(e,i){return!e||e.value===i?null:e.left?.value===i||e.right?.value===i?e:i<e.value?this.findParent(e.left,i):this.findParent(e.right,i)}checkBalance(e=this.root){const i=[];if(this._check(e,i,0),i.length===0)return{allIds:[],lowestId:null};const a=i.reduce((c,x)=>x.depth>c.depth?x:c);return{allIds:i.map(c=>c.id),lowestId:a.id}}_check(e,i,a){if(!e)return;const c=this.getBalance(e);(c>1||c<-1)&&i.push({id:e.id,depth:a}),this._check(e.left,i,a+1),this._check(e.right,i,a+1)}getNodeById(e){return this._getById(this.root,e)}_getById(e,i){return!e||e.id===i?e:this._getById(e.left,i)||this._getById(e.right,i)}}const pe=25,Ut=80,Le=({node:s,x:e,y:i,level:a,parentX:c,parentY:x,unbalancedIds:f=[],selectedId:d,highlightedIds:w=[],onNodeClick:y,onNodeDrag:g,onMouseEnter:k,onMouseLeave:m,getBalance:$,pulsingId:Z,showHeight:B=!0,showBF:H=!0})=>{if(!s)return null;const J=f.includes(s.id),q=d===s.id,ee=w.includes(s.id),Q=Z===s.id,X=!!g,W=$?$(s):0,te=Math.pow(2,Math.max(0,s.height-2))*50,be=e-te,ce=e+te,de=i+Ut;return t.jsxs(t.Fragment,{children:[c!==void 0&&x!==void 0&&t.jsx("svg",{className:"absolute pointer-events-none",style:{overflow:"visible",left:0,top:0,zIndex:-1},children:t.jsx(Oe.line,{x1:c,y1:x,x2:e,y2:i,stroke:"#94a3b8",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5}})}),t.jsx(Le,{node:s.left,x:be,y:de,level:a+1,parentX:e,parentY:i,unbalancedIds:f,selectedId:d,highlightedIds:w,onNodeClick:y,onNodeDrag:g,onMouseEnter:k,onMouseLeave:m,getBalance:$,pulsingId:Z,showHeight:B,showBF:H}),t.jsx(Le,{node:s.right,x:ce,y:de,level:a+1,parentX:e,parentY:i,unbalancedIds:f,selectedId:d,highlightedIds:w,onNodeClick:y,onNodeDrag:g,onMouseEnter:k,onMouseLeave:m,getBalance:$,pulsingId:Z,showHeight:B,showBF:H}),t.jsxs(Oe.div,{layout:!0,className:`absolute flex items-center justify-center border-2 rounded-full shadow-md z-10 transition-colors no-pan
                      ${J?"border-red-500 bg-red-50":q?"border-blue-600 ring-4 ring-blue-200 bg-white":ee?"border-yellow-500 bg-yellow-100":"border-blue-500 bg-white"}
                      ${Q?"ring-8 ring-blue-400/30 border-blue-600":""}
                      ${X?"cursor-grab active:cursor-grabbing":"cursor-pointer"}
                    `,style:{width:pe*2,height:pe*2,left:e-pe,top:i-pe,touchAction:"none"},initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},transition:{type:"spring",stiffness:260,damping:20},drag:X?"x":!1,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.2,dragSnapToOrigin:!0,onDragEnd:(R,T)=>{g&&(T.offset.x>40?g(s,"right"):T.offset.x<-40&&g(s,"left"))},onClick:R=>{R.stopPropagation(),y?.(s)},onMouseEnter:k,onMouseLeave:m,children:[t.jsx("span",{className:`font-bold select-none ${J?"text-red-700":"text-slate-700"}`,children:s.value}),H&&t.jsxs("div",{className:`absolute -top-6 text-[10px] font-black px-1 rounded ${W>1||W<-1?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:["BF:",W]}),B&&t.jsxs("div",{className:"absolute -bottom-6 text-[9px] text-slate-400 select-none uppercase tracking-tighter font-bold",children:["H:",s.height-1]})]})]})},N=({text:s,className:e="",onLinkClick:i})=>{if(!s)return null;const a=x=>x.split(/(\$\*[\s\S]+?\$|\*\*[\s\S]+?\*\*|\`[\s\S]+?\`|\*[\s\S]+?\*|\[\[[\s\S]+?\]\])/g).map((d,w)=>{if(!d)return null;if(d.startsWith("**")&&d.endsWith("**"))return t.jsx("strong",{className:"font-extrabold text-amber-400 mx-0.5",children:d.slice(2,-2)},w);if(d.startsWith("`")&&d.endsWith("`"))return t.jsx("code",{className:"bg-slate-950 px-1.5 py-0.5 rounded text-blue-300 font-mono text-[11px] border border-slate-700/50 mx-0.5 inline-block leading-none shadow-inner",children:d.slice(1,-1)},w);if(d.startsWith("*")&&d.endsWith("*"))return t.jsx("em",{className:"italic text-slate-300 opacity-80 mx-0.5",children:d.slice(1,-1)},w);if(d.startsWith("[[")&&d.endsWith("]]")){const[y,g]=d.slice(2,-2).split("|");return t.jsx("button",{onClick:()=>i?.(g),className:"text-blue-400 font-black border-b border-blue-400/30 hover:text-blue-300 transition-all cursor-pointer mx-0.5",children:y},w)}return d}),c=s.split(`
`);return t.jsx("div",{className:`${e} space-y-2 text-[13px]`,children:c.map((x,f)=>{const d=x.trim();if(!d)return t.jsx("div",{className:"h-2"},f);if(d.startsWith("|")){if(d.includes("---"))return null;const w=d.split("|").filter((g,k,m)=>k>0&&k<m.length-1),y=f===0||c[f+1]&&c[f+1].includes("---");return t.jsx("div",{className:`flex border-b border-slate-800 py-2 gap-4 transition-colors ${y?"bg-white/5 font-bold border-b-2 border-slate-700":"hover:bg-white/5"}`,children:w.map((g,k)=>t.jsx("div",{className:`flex-1 px-2 text-sm ${y?"text-slate-100":"text-slate-400"} break-words`,children:a(g.trim())},k))},f)}return d.startsWith("- ")||d.startsWith("* ")?t.jsxs("div",{className:"flex gap-3 pl-2 py-0.5",children:[t.jsx("span",{className:"text-blue-500 font-black text-xs",children:"â€¢"}),t.jsx("div",{className:"flex-grow leading-relaxed",children:a(x.trim().substring(2))})]},f):t.jsx("div",{className:"leading-relaxed py-0.5",children:a(x)},f)})})},S=[{id:"l1",type:"concept",setup:s=>{[20,10,30,5].forEach(e=>s.insertManual(e))},targetVal:20},{id:"l2",type:"quiz",setup:s=>{[30,20,10].forEach(e=>s.insertManual(e))},targetVal:30,answer:2},{id:"l3",type:"guided",setup:s=>{[50,30,60,20,40,10].forEach(e=>s.insertManual(e))}},{id:"l4",type:"challenge",setup:s=>{[20,10,50,30,60,70].forEach(e=>s.insertManual(e))}},{id:"l5",type:"guided",setup:s=>{[50,20,80,10,30].forEach(e=>s.insertManual(e)),s.insertManual(25)}},{id:"l6",type:"challenge",setup:s=>{[50,20,80,70,90].forEach(e=>s.insertManual(e)),s.insertManual(75)}},{id:"l7",type:"guided",setup:s=>{[20,10,30,25,40].forEach(e=>s.insertManual(e))},targetVal:10,check:s=>{const e=(i,a)=>i?i.value===a?!0:e(i.left,a)||e(i.right,a):!1;return!e(s.root,10)}}],qt=()=>{const{t:s}=Bt(["common","avl"],{useSuspense:!1}),[e]=n.useState(()=>new Ot),[i,a]=n.useState(null),[c,x]=n.useState({allIds:[],lowestId:null}),[f,d]=n.useState(null),[w,y]=n.useState(""),[g,k]=n.useState("auto"),[m,$]=n.useState("logs"),[Z,B]=n.useState(!1),[H,J]=n.useState("concept"),[q,ee]=n.useState(null),[Q,X]=n.useState(null),[W,te]=n.useState(!1),[be,ce]=n.useState(!1),[de,R]=n.useState(!1),[T,L]=n.useState(null),[se,le]=n.useState(null),[G,Me]=n.useState(window.innerWidth>768),[Xe,Ge]=n.useState(350),[D,Ee]=n.useState(!1),[K,me]=n.useState(!1),he=n.useRef(null),[_,ue]=n.useState([]),[I,O]=n.useState(-1),[v,Y]=n.useState([]),[E,P]=n.useState(-1),[b,ve]=n.useState(!1),[Ke,we]=n.useState(!1),[Be,Ye]=n.useState(1),[Ze,et]=n.useState([]),[_e,tt]=n.useState(null),[j,st]=n.useState(0),[ie,je]=n.useState("menu"),[U,ae]=n.useState(0),[Pe,Ve]=n.useState(""),[He,Ne]=n.useState(null),[lt,ye]=n.useState(!1),[V,xe]=n.useState(-1),re=l=>V===l?"z-[10001] relative ring-4 ring-yellow-400 shadow-[0_0_0_9999px_rgba(0,0,0,0.7)]":"",ke=n.useRef(null),A=n.useRef(!1),it=n.useCallback(()=>Ee(!0),[]),Se=n.useCallback(()=>Ee(!1),[]),Ce=n.useCallback(l=>{if(D){const r=l.clientX;r>=320&&r<600&&Ge(r)}},[D]);n.useEffect(()=>(window.addEventListener("mousemove",Ce),window.addEventListener("mouseup",Se),()=>{window.removeEventListener("mousemove",Ce),window.removeEventListener("mouseup",Se)}),[Ce,Se]),n.useEffect(()=>{if(I===-1){ue([{id:"init",action:"Initial",steps:[],finalSnapshot:"null"}]),O(0);const l=localStorage.getItem("ds-playground-avl-max-level");l?ae(parseInt(l)):localStorage.getItem("ds-playground-avl-tree-completed")==="true"&&ae(S.length),!(localStorage.getItem("ds-playground-avl-tree-completed")==="true")&&!l&&(B(!0),$("tutorial"))}},[]),n.useEffect(()=>{if(ie==="lesson"&&!b&&j<S.length){const l=S[j];let r=!1;if(l.type==="concept")f&&l.targetVal&&f.value===l.targetVal&&(r=!0);else if(l.type==="guided"||l.type==="challenge"){const o=c.allIds.length===0,h=I>0,u=l.check?l.check(e):!0;o&&h&&u&&(r=!0)}if(r&&j>=U){const o=j+1;ae(o),localStorage.setItem("ds-playground-avl-max-level",o.toString()),o===S.length&&localStorage.setItem("ds-playground-avl-tree-completed","true")}}},[ie,j,f,c,I,U,b]),n.useEffect(()=>{if(v.length>0&&E>=0){const l=v[E];l.payload?.rootSnapshot!==void 0&&(a(l.payload.rootSnapshot),x(g==="manual"?e.checkBalance(l.payload.rootSnapshot):{allIds:[],lowestId:null})),et(l.targetIds||[]),tt(l.message||null)}},[E,v,g,e]),n.useEffect(()=>{if(q){const l=setTimeout(()=>ee(null),3e3);return()=>clearTimeout(l)}},[q]),n.useEffect(()=>{if(Q){const l=setTimeout(()=>X(null),5e3);return()=>clearTimeout(l)}},[Q]),n.useEffect(()=>{if(K){const l=setTimeout(()=>me(!1),3e3);return()=>clearTimeout(l)}},[K]);const ge=(l,r=0)=>{F(),ve(!0),we(!1),A.current=!1;let o=r;const h=()=>{if(o<l-1){if(A.current)return;o++,P(o);const u=(v[o]?.type==="rotate"?1500:800)/Be;ke.current=setTimeout(h,u)}else ve(!1)};h()},F=()=>{ke.current&&clearTimeout(ke.current),ve(!1),we(!1),A.current=!1},at=()=>{if(!b&&v.length>0){ge(v.length,E);return}A.current=!A.current,we(A.current),A.current||ge(v.length,E)},ne=l=>{F(),l>=0&&l<v.length&&P(l)},Ie=(l,r)=>{F();const o=r.find(M=>M.type==="error");if(o){ee(String(s(o.message?.replace("error.","avl:error.")||"Error",o.payload)));return}R(!1),L(null),Y(r),P(0);const h={id:Math.random().toString(36).substr(2,9),action:l,steps:r,finalSnapshot:e.toJSON()},u=_.slice(0,I+1);u.push(h),ue(u),O(u.length-1),ge(r.length)},We=()=>{if(b)return;const l=parseInt(w);isNaN(l)||(Ie(`${s("insert")} ${l}`,g==="manual"?e.insertManual(l):e.insert(l)),y(""))},rt=()=>{if(b)return;const l=f?f.value:parseInt(w);isNaN(l)||(Ie(`${s("delete")} ${l}`,g==="manual"?e.deleteManual(l):e.delete(l)),y(""),d(null))},De=()=>{if(!c.lowestId)return null;if(se&&c.allIds.includes(se))return{id:se,reason:"heuristic"};const l=e.getNodeById(c.lowestId);if(l){const r=e.findParent(i,l.value);if(r&&c.allIds.includes(r.id)){const o=e.getBalance(l),h=e.getBalance(r);if(o*h>0)return{id:r.id,reason:"heuristic"}}}return{id:c.lowestId,reason:"lowest"}},nt=(l,r)=>{if(!b){if(g==="manual"&&c.allIds.length>0){const o=De();if(c.allIds.includes(l.id)&&o&&l.id!==o.id){const h=e.getNodeById(o.id),u=o.reason==="heuristic"?s("avl:guide.heuristicWarning"):s("avl:guide.lowestWarning");X(u+` (${s("avl:guide.recommendedTarget",{val:h?.value})})`)}}Ie(`${s(r==="left"?"avl:left":"avl:right")} @ ${l.value}`,e.rotateNode(l.value,r))}},ot=()=>{if(I<=0||b)return;F();const l=I-1,r=_[l];e.fromJSON(r.finalSnapshot),a(e.root?e.root.clone():null),Y(r.steps),P(r.steps.length>0?r.steps.length-1:-1),O(l),x(g==="manual"?e.checkBalance(e.root):{allIds:[],lowestId:null}),R(!1),le(null)},ct=()=>{if(I>=_.length-1||b)return;F();const l=I+1,r=_[l];O(l),Y(r.steps),P(0),ge(r.steps.length),R(!1)},dt=()=>{if(!K){me(!0);return}me(!1),b&&F(),e.root=null,a(null),x({allIds:[],lowestId:null}),d(null),ue([{id:"init",action:"Cleared",steps:[],finalSnapshot:"null"}]),O(0),Y([]),P(-1),R(!1),le(null),L(null)},fe=async l=>{if(st(l),je("lesson"),Ve(""),Ne(null),e.root=null,a(null),x({allIds:[],lowestId:null}),d(null),ue([{id:"init",action:"Lesson Start",steps:[],finalSnapshot:"null"}]),O(0),Y([]),P(-1),$("tutorial"),k("manual"),l<S.length){if(S[l].setup(e),ht(e.root),S[l].targetVal){const r=(h,u)=>h?h.value===u?h.id:r(h.left,u)||r(h.right,u):null,o=r(e.root,S[l].targetVal);o&&L(o)}R(S[l].type==="guided")}},ht=l=>{a(l?l.clone():null),x(e.checkBalance(l))},ut=l=>{l==="bf"&&($("wiki"),setTimeout(()=>{he.current?.scrollIntoView({behavior:"smooth",block:"center"}),he.current?.classList.add("ring-2","ring-blue-500","ring-offset-4","ring-offset-slate-900"),setTimeout(()=>he.current?.classList.remove("ring-2","ring-blue-500","ring-offset-4","ring-offset-slate-900"),2e3)},100))},xt=()=>{if(m!=="tutorial")return null;if(ie==="menu")return t.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[t.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-slate-700",children:[t.jsx("h3",{className:"text-white font-bold mb-1",children:s("avl:tutorial.title")}),t.jsx("p",{className:"text-xs text-slate-400",children:s("avl:tutorial.welcome")})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map((o,h)=>{const u=h>U,M=h<U;return t.jsxs("button",{onClick:()=>!u&&fe(h),disabled:u,className:`p-3 rounded-xl border text-left transition-all relative overflow-hidden ${u?"bg-slate-900 border-slate-800 opacity-50 cursor-not-allowed":"bg-slate-800 border-slate-700 hover:bg-slate-700 hover:border-blue-500/50"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[t.jsxs("span",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${u?"bg-slate-800 text-slate-600":M?"bg-green-500/20 text-green-400":"bg-blue-600 text-white"}`,children:["L",h+1]}),M&&t.jsx(Re,{size:14,className:"text-green-500"}),u&&t.jsx("div",{className:"text-slate-600",children:"ðŸ”’"})]}),t.jsx("div",{className:`text-xs font-bold leading-tight relative z-10 ${u?"text-slate-600":"text-slate-300"}`,children:s(`avl:tutorial.levels.${o.id}.title`)})]},o.id)})}),U>0&&t.jsxs("button",{onClick:()=>{window.confirm("Reset all course progress?")&&(localStorage.removeItem("ds-playground-avl-max-level"),localStorage.removeItem("ds-playground-avl-tree-completed"),ae(0))},className:"w-full py-3 mt-2 text-[10px] font-bold text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-xl transition-colors uppercase tracking-widest flex items-center justify-center gap-2 border border-transparent hover:border-red-900/30",children:[t.jsx(Fe,{size:12})," Reset Progress"]})]});const l=S[j],r=U>j;return t.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("button",{onClick:()=>je("menu"),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white transition-colors",children:t.jsx(Je,{size:16})}),t.jsxs("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:["LEVEL ",j+1]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white leading-tight",children:s(`avl:tutorial.levels.${l.id}.title`)}),t.jsx(N,{text:s(`avl:tutorial.levels.${l.id}.desc`),className:"text-slate-400",onLinkClick:ut}),l.type==="quiz"&&!r&&t.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 space-y-3",children:[t.jsx("p",{className:"text-sm font-bold text-slate-300",children:s("avl:tutorial.quiz.bfQuestion",{val:l.targetVal})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:Pe,onChange:o=>Ve(o.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-white font-mono text-center outline-none focus:border-blue-500",placeholder:"?"}),t.jsx("button",{onClick:()=>{if(parseInt(Pe)===l.answer){Ne("correct");const o=j+1;o>U&&(ae(o),localStorage.setItem("ds-playground-avl-max-level",o.toString()))}else Ne("wrong")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs uppercase hover:bg-blue-500",children:s("avl:tutorial.quiz.submit")})]}),He==="correct"&&t.jsxs("div",{className:"text-green-400 text-xs font-bold flex items-center gap-1",children:[t.jsx($e,{size:12})," ",s("avl:tutorial.quiz.correct")]}),He==="wrong"&&t.jsx("div",{className:"text-red-400 text-xs font-bold",children:s("avl:tutorial.quiz.wrong",{lh:"?",rh:"?",ans:"?"})})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-800",children:[t.jsx("button",{onClick:()=>fe(j),className:"flex-1 py-3 bg-slate-800 text-slate-400 rounded-xl text-[10px] font-bold uppercase hover:bg-slate-700 transition-colors",children:s("avl:tutorial.reset")}),r&&(j<S.length-1?t.jsxs("button",{onClick:()=>fe(j+1),className:"flex-[2] py-3 bg-green-600 text-white rounded-xl text-[10px] font-bold uppercase flex items-center justify-center gap-2 hover:bg-green-500 shadow-lg shadow-green-900/20",children:[s("avl:tutorial.next")," ",t.jsx($e,{size:14})]}):t.jsxs("button",{onClick:()=>ye(!0),className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl text-[10px] font-bold uppercase flex items-center justify-center gap-2 hover:bg-blue-500 shadow-lg shadow-blue-900/20 animate-bounce",children:[s("avl:tutorial.finishBtn")," ",t.jsx(Re,{size:14})]}))]})]})},gt=()=>lt?t.jsx("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center bg-slate-900/80 backdrop-blur-md p-4 animate-in fade-in",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center space-y-6 animate-in zoom-in-95 duration-300",children:[t.jsx("div",{className:"w-20 h-20 bg-yellow-100 text-yellow-500 rounded-full flex items-center justify-center mx-auto ring-8 ring-yellow-50",children:t.jsx(Re,{size:40})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-3xl font-black text-slate-900",children:s("avl:tutorial.congratsTitle")}),t.jsx("p",{className:"text-slate-500 text-sm leading-relaxed whitespace-pre-line",children:s("avl:tutorial.congratsDesc")})]}),t.jsxs("div",{className:"pt-4 space-y-3",children:[t.jsx("button",{onClick:()=>{ye(!1),je("menu")},className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-bold hover:bg-blue-500 hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-blue-500/20",children:s("avl:tutorial.backToMenu")}),t.jsx("button",{onClick:()=>ye(!1),className:"w-full py-3 text-slate-400 font-bold hover:text-slate-600 transition-colors text-xs uppercase tracking-widest",children:"Close"})]})]})}):null,ft=()=>{if(g!=="manual"||c.allIds.length===0||b)return T&&L(null),se&&le(null),null;if(!de)return T&&L(null),t.jsx("button",{onClick:()=>R(!0),className:"w-full py-3 mb-6 bg-amber-500/10 border-2 border-dashed border-amber-500/30 rounded-2xl text-amber-500 font-black text-[10px] uppercase tracking-widest animate-pulse",children:s("avl:guide.showHint")});const l=De();if(!l)return null;const r=l.id;r!==se&&le(r);const o=e.getNodeById(r);if(!o)return null;const h=e.getBalance(o);let u,M="";if(h>1){const z=o.left;e.getBalance(z)>=0?(M=s("avl:guide.caseLL"),u=t.jsx(N,{text:s("avl:guide.actionLL",{val:o.value})}),T!==o.id&&L(o.id)):(M=s("avl:guide.caseLR"),u=t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("div",{className:"bg-blue-600 text-white text-[8px] font-black px-2 py-0.5 rounded inline-block uppercase mb-1",children:"Step 1 of 2"}),t.jsx(N,{text:s("avl:guide.actionLR_step1",{childVal:z?.value})})]}),z&&T!==z.id&&L(z.id))}else if(h<-1){const z=o.right;e.getBalance(z)<=0?(M=s("avl:guide.caseRR"),u=t.jsx(N,{text:s("avl:guide.actionRR",{val:o.value})}),T!==o.id&&L(o.id)):(M=s("avl:guide.caseRL"),u=t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("div",{className:"bg-blue-600 text-white text-[8px] font-black px-2 py-0.5 rounded inline-block uppercase mb-1",children:"Step 1 of 2"}),t.jsx(N,{text:s("avl:guide.actionRL_step1",{childVal:z?.value})})]}),z&&T!==z.id&&L(z.id))}return t.jsxs("div",{className:"bg-amber-950/50 border border-amber-500/30 p-4 rounded-xl text-amber-50 mb-6 relative group shadow-2xl animate-in slide-in-from-top-2",children:[t.jsx("button",{onClick:()=>{R(!1),L(null),le(null)},className:"absolute top-2 right-2 p-1 text-amber-500/50 hover:text-amber-500 transition-colors",children:t.jsx(oe,{size:14})}),t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-400 font-bold border-b border-amber-700/50 pb-2",children:[t.jsx(Ue,{size:18}),t.jsx("span",{children:"Advice"})]}),t.jsxs("div",{className:"mb-2 py-1 px-2 bg-blue-500/20 text-blue-300 text-[8px] font-black rounded border border-blue-500/30 inline-block uppercase tracking-widest",children:["Focus: Node ",o.value]}),t.jsx("h4",{className:"font-bold text-amber-200 mb-2",children:M}),t.jsx("div",{className:"text-sm leading-relaxed",children:u})]})},pt=()=>{if(V===-1)return null;const l=[{title:s("avl:guide.ui.mode"),pos:"top-34 left-88"},{title:s("avl:guide.ui.sidebar"),pos:"top-1/2 left-80"},{title:s("avl:guide.ui.canvas"),pos:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},{title:s("avl:guide.ui.action"),pos:"bottom-26 left-88"},{title:s("avl:guide.ui.timeline"),pos:"bottom-26 right-80"}],r=l[V];return r?t.jsxs("div",{className:`fixed ${r.pos} z-[10002] bg-slate-900 text-white p-4 rounded-xl shadow-2xl max-w-xs animate-in zoom-in-95 border border-slate-700`,children:[t.jsx("h4",{className:"font-bold mb-3 text-sm leading-relaxed",children:r.title}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>xe(-1),className:"text-slate-400 hover:text-white text-[10px] font-bold px-2 uppercase tracking-wider",children:"Exit"}),V>0&&t.jsx("button",{onClick:()=>xe(V-1),className:"bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider",children:"Prev"}),t.jsx("button",{onClick:()=>xe(V<l.length-1?V+1:-1),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider",children:V<l.length-1?"Next":"Finish"})]})]}):null};return t.jsxs("div",{className:`h-full w-full flex bg-slate-100 overflow-hidden relative font-sans text-slate-900 ${D?"cursor-col-resize select-none":""}`,children:[t.jsx("style",{children:D?"* { transition: none !important; cursor: col-resize !important; user-select: none !important; }":""}),q&&t.jsxs("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-[10000] bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 border border-red-400 animate-in fade-in slide-in-from-top-4",children:[t.jsx(bt,{size:20,className:"shrink-0"}),t.jsx(N,{text:q,className:"text-white font-bold"}),t.jsx(oe,{size:18,onClick:()=>ee(null),className:"cursor-pointer hover:bg-white/20 rounded-full"})]}),Q&&t.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-[9999] bg-amber-500 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 border border-amber-400 animate-in fade-in slide-in-from-top-4",children:[t.jsx(Ue,{size:20,className:"shrink-0"}),t.jsx(N,{text:Q,className:"text-white font-bold"}),t.jsx(oe,{size:18,onClick:()=>X(null),className:"cursor-pointer hover:bg-white/20 rounded-full"})]}),t.jsxs("div",{style:{width:G?window.innerWidth>768?`${Xe}px`:"100%":"0px",transition:D?"none":"width 300ms ease-in-out"},className:`h-full flex flex-col bg-slate-900 border-r border-slate-800 shrink-0 z-[100] shadow-2xl relative ${G?"":"overflow-hidden"} ${window.innerWidth<=768?"fixed left-0 top-0":"relative"} ${re(1)}`,children:[window.innerWidth<=768&&G&&t.jsx("button",{onClick:()=>Me(!1),className:"absolute top-4 right-4 text-white z-[110]",children:t.jsx(oe,{size:24})}),t.jsxs("div",{className:"flex flex-col h-full min-w-[280px]",children:[t.jsxs("div",{className:"flex p-2 gap-1 bg-slate-950/50 min-w-[320px]",children:[t.jsxs("button",{onClick:()=>$("logs"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[10px] font-black uppercase transition-all ${m==="logs"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(mt,{size:14})," Logs"]}),t.jsxs("button",{onClick:()=>$("wiki"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[10px] font-black uppercase transition-all ${m==="wiki"?"bg-amber-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(vt,{size:14})," Wiki"]}),t.jsxs("button",{onClick:()=>fe(0),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[10px] font-black uppercase transition-all ${m==="tutorial"?"bg-green-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(wt,{size:14})," Course"]})]}),t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 font-mono text-[10px] text-slate-300 custom-scrollbar min-w-[320px]",children:[m==="logs"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.2em] mb-4",children:"History"}),ft(),_.slice(1).reverse().map((l,r)=>t.jsxs("button",{onClick:()=>{F(),Y(l.steps),P(l.steps.length-1),O(_.length-1-r)},className:`w-full text-left p-3 rounded-xl border transition-all ${I===_.length-1-r?"bg-blue-600/20 border-blue-500/50 text-blue-100 shadow-inner":"bg-slate-800/30 border-slate-700/50 hover:bg-slate-800 text-slate-400"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"font-black uppercase tracking-wider",children:l.action}),t.jsxs("span",{className:"opacity-40 text-[8px]",children:[l.steps.length," steps"]})]}),t.jsx("div",{className:"text-[9px] opacity-60 truncate",children:l.steps[l.steps.length-1]?.message})]},l.id))]}),m==="wiki"&&t.jsxs("div",{className:"space-y-8 font-sans pb-12 text-slate-400",children:[t.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.3em]",children:"Knowledge Base"}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-blue-400 font-bold text-sm mb-2 uppercase",children:"Definition"}),t.jsx(N,{text:s("avl:wiki.conceptDesc")})]}),t.jsx("div",{ref:he,className:"bg-slate-950/50 p-4 rounded-2xl border border-slate-800 text-center transition-all duration-500",children:t.jsx("code",{className:"text-blue-400 font-bold text-sm",children:"BF = H(L) - H(R)"})}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-amber-400 font-bold text-sm mb-2 uppercase",children:"Deletion"}),t.jsx(N,{text:s("avl:wiki.deletionDesc")})]}),t.jsxs("section",{className:"space-y-3",children:[t.jsx("h4",{className:"text-indigo-400 font-bold text-sm mb-2 uppercase",children:"Strategies"}),t.jsx("div",{className:"grid gap-3",children:["LL","RR","LR","RL"].map(l=>t.jsxs("div",{className:"p-3 rounded-xl bg-slate-800/50 border border-slate-700/50",children:[t.jsx("div",{className:"text-white font-bold text-xs mb-1",children:s(`avl:wiki.case${l}`)}),t.jsx(N,{text:s(`avl:wiki.case${l}Desc`)})]},l))})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-green-400 font-bold text-sm mb-2 uppercase",children:"Complexity"}),t.jsx(N,{text:s("avl:wiki.compTable")})]})]}),m==="tutorial"&&xt()]})]}),G&&window.innerWidth>768&&t.jsx("div",{onMouseDown:it,className:`absolute right-0 top-0 w-1.5 h-full cursor-col-resize z-[120] hover:bg-blue-500/50 transition-colors ${D?"bg-blue-600":""}`})]}),t.jsxs("div",{className:"flex-grow flex flex-col min-w-0 h-full relative bg-white",children:[t.jsxs("div",{className:`flex-grow relative bg-slate-50 overflow-hidden ${D?"pointer-events-none":""}`,children:[t.jsx("button",{onClick:()=>Me(!G),className:"absolute bottom-6 left-6 z-30 w-10 h-10 bg-slate-900 text-white rounded-2xl shadow-xl flex items-center justify-center hover:scale-110 active:scale-90 transition-all",children:G?t.jsx(jt,{size:20}):t.jsx(Nt,{size:20})}),t.jsxs("div",{className:"absolute top-6 left-6 flex gap-3 z-20 pointer-events-none max-w-[calc(100%-80px)]",children:[t.jsxs("div",{className:`bg-white/80 backdrop-blur-md px-4 py-2 rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3 pointer-events-auto ${re(0)}`,children:[t.jsx("button",{onClick:()=>k("auto"),className:`px-3 py-1 text-[10px] font-black rounded-lg transition-all ${g==="auto"?"bg-blue-600 text-white shadow-lg shadow-blue-200":"text-slate-400 hover:text-slate-600"}`,children:"AUTO"}),t.jsx("button",{onClick:()=>k("manual"),className:`px-3 py-1 text-[10px] font-black rounded-lg transition-all ${g==="manual"?"bg-amber-500 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"MANUAL"})]}),_e&&t.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-md px-4 py-2 rounded-2xl text-white shadow-lg border border-blue-400 flex items-center gap-2 animate-in slide-in-from-left-4 overflow-hidden",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse shrink-0"}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider truncate",children:_e})]})]}),t.jsx("button",{onClick:()=>B(!0),className:"absolute top-6 right-6 w-10 h-10 bg-white/80 backdrop-blur-md border border-slate-200 rounded-2xl flex items-center justify-center text-slate-400 hover:text-blue-600 shadow-sm z-20",children:t.jsx(Ae,{size:20})}),t.jsx(yt,{initialScale:1,minScale:.1,maxScale:2,limitToBounds:!1,centerOnInit:!0,panning:{disabled:be,excluded:["no-pan"]},children:({zoomIn:l,zoomOut:r,resetTransform:o})=>t.jsxs(t.Fragment,{children:[t.jsx(kt,{wrapperStyle:{width:"100%",height:"100%"},contentStyle:{width:"100%",height:"100%",overflow:"visible"},children:t.jsx("div",{className:`relative cursor-grab active:cursor-grabbing bg-grid-slate-100 ${re(2)}`,style:{width:"20000px",height:"20000px"},onClick:()=>d(null),children:t.jsx("div",{className:"absolute left-1/2 top-[100px] -translate-x-1/2",style:{overflow:"visible"},children:t.jsx(Le,{node:i,x:0,y:0,level:0,unbalancedIds:c.allIds,selectedId:f?.id,highlightedIds:Ze,pulsingId:T,onNodeClick:d,onNodeDrag:g==="manual"?nt:void 0,onMouseEnter:()=>ce(!0),onMouseLeave:()=>ce(!1),getBalance:h=>e.getBalance(h),showHeight:!(m==="tutorial"&&ie==="lesson"&&j===0),showBF:!(m==="tutorial"&&ie==="lesson"&&j<=1)})})})}),t.jsxs("div",{className:"absolute bottom-6 right-6 z-20 flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>l(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white transition-all active:scale-90",children:t.jsx(St,{size:20})}),t.jsx("button",{onClick:()=>r(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white transition-all active:scale-90",children:t.jsx(Ct,{size:20})}),t.jsx("button",{onClick:()=>o(),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg hover:bg-blue-700 transition-all active:scale-90 mt-2",children:t.jsx(It,{size:20})})]})]})})]}),t.jsxs("div",{className:"min-h-24 bg-white border-t border-slate-200 p-4 flex flex-col md:flex-row gap-6 items-center overflow-visible shadow-[0_-10px_40px_rgba(0,0,0,0.03)]",children:[t.jsxs("div",{className:`flex flex-col gap-2 shrink-0 w-full md:w-[320px] ${re(3)}`,children:[t.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-3 w-full",children:[t.jsxs("div",{className:"flex gap-2 items-center bg-slate-50 p-1 rounded-xl border border-slate-100 flex-grow overflow-hidden",children:[t.jsx("input",{type:"number",value:w,onChange:l=>y(l.target.value),onKeyDown:l=>l.key==="Enter"&&We(),placeholder:"Val",className:"flex-grow min-w-0 px-2 py-1.5 bg-transparent outline-none font-bold text-xs text-center text-slate-900"}),t.jsx("button",{onClick:We,disabled:b,className:`px-4 py-1.5 rounded-lg font-black text-white text-[9px] shadow-md shrink-0 ${g==="manual"?"bg-amber-500":"bg-blue-600"}`,children:"INSERT"})]}),t.jsxs("button",{onClick:rt,disabled:b,className:`px-4 py-2.5 rounded-xl font-black text-white text-[9px] shadow-lg flex items-center gap-2 transition-all shrink-0 ${f?"bg-red-600":"bg-slate-300"}`,children:[t.jsx(Fe,{size:12})," DELETE"]})]}),t.jsxs("button",{onClick:dt,disabled:b,className:`w-full flex items-center justify-center gap-2 py-1.5 border border-dashed text-[9px] font-black rounded-lg transition-all uppercase tracking-widest ${K?"bg-red-600 border-red-600 text-white animate-bounce":"border-slate-200 text-slate-400 hover:bg-red-50 hover:text-red-500"}`,children:[t.jsx(zt,{size:12,className:K?"animate-spin":""})," ",K?"Confirm Reset?":"Reset Playground"]})]}),t.jsx("div",{className:"hidden md:block h-8 w-px bg-slate-100"}),t.jsxs("div",{className:`flex-grow flex flex-col gap-1 w-full ${re(4)}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:ot,disabled:b||I<=0,className:"w-8 h-8 rounded-lg border border-slate-100 flex items-center justify-center hover:bg-slate-50 text-slate-600 transition-all",children:t.jsx(ze,{size:16})}),t.jsx("button",{onClick:ct,disabled:b||I>=_.length-1,className:"w-8 h-8 rounded-lg border border-slate-100 flex items-center justify-center hover:bg-slate-50 text-slate-600 transition-all",children:t.jsx($t,{size:16})})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1 rounded-xl border border-slate-100",children:[t.jsx("button",{onClick:()=>ne(0),disabled:v.length===0,className:"p-1.5 text-slate-400 hover:text-slate-600 transition-colors",children:t.jsx(Rt,{size:14})}),t.jsx("button",{onClick:()=>ne(E-1),disabled:v.length<=0,className:"p-1.5 text-slate-600 hover:bg-white rounded-lg shadow-sm transition-all",children:t.jsx(Je,{size:18})}),t.jsx("button",{onClick:at,className:"w-8 h-8 bg-slate-900 text-white rounded-lg flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-md",children:b&&!Ke?t.jsx(Tt,{size:16,fill:"currentColor"}):t.jsx(Lt,{size:16,fill:"currentColor"})}),t.jsx("button",{onClick:()=>ne(E+1),disabled:v.length<=0,className:"p-1.5 text-slate-600 hover:bg-white rounded-lg shadow-sm transition-all",children:t.jsx(qe,{size:18})}),t.jsx("button",{onClick:()=>ne(v.length-1),disabled:v.length===0,className:"p-1.5 text-slate-400 hover:text-slate-600 transition-colors",children:t.jsx(Mt,{size:14})})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>te(!W),className:`w-8 h-8 rounded-lg border flex items-center justify-center transition-all ${W?"bg-blue-600 text-white":"bg-white border-slate-100 text-slate-400"}`,children:t.jsx(Et,{size:16})}),W&&t.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-white rounded-xl shadow-2xl border border-slate-100 p-1 flex flex-col gap-0.5 z-50 animate-in slide-in-from-bottom-2",children:[.25,.5,1,1.5,2,3].map(l=>t.jsxs("button",{onClick:()=>{Ye(l),te(!1)},className:`px-4 py-2 rounded-xl text-[9px] font-black ${Be===l?"bg-blue-600 text-white":"hover:bg-slate-50 text-slate-500"}`,children:[l,"x"]},l))})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-[7px] font-black text-slate-400 w-8 text-center",children:["STEP ",Math.max(0,E+1)]}),t.jsx("input",{type:"range",min:"0",max:Math.max(0,v.length-1),value:Math.max(0,E),onChange:l=>ne(parseInt(l.target.value)),className:"flex-grow h-1 bg-slate-100 rounded-full accent-blue-600 cursor-pointer"}),t.jsx("span",{className:"text-[7px] font-black text-slate-400 w-8 text-right",children:v.length})]})]}),t.jsx("div",{className:"hidden md:block h-8 w-px bg-slate-100"}),t.jsxs("div",{className:"hidden sm:flex w-[150px] flex-col gap-1 shrink-0 text-sm",children:[t.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50/50 rounded-lg border border-blue-100",children:[t.jsx("span",{className:"text-[7px] font-black text-blue-400 uppercase tracking-widest",children:"Height"}),t.jsx("span",{className:"text-xs font-black text-blue-700 font-mono",children:i?i.height:0})]}),t.jsxs("div",{className:`flex justify-between items-center p-2 rounded-lg border ${c.allIds.length>0?"bg-red-50 border-red-100 text-red-600":"bg-green-50 border-green-100 text-green-600"}`,children:[t.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest",children:"Status"}),t.jsx("span",{className:"text-[8px] font-black uppercase font-mono",children:c.allIds.length>0?"Error":"Stable"})]})]})]})]}),Z&&t.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-slate-900/60 p-4 backdrop-blur-sm animate-in fade-in",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden relative animate-in zoom-in-95 duration-200",children:[t.jsx(oe,{onClick:()=>B(!1),className:"absolute top-6 right-6 cursor-pointer text-slate-400 hover:text-slate-600 transition-colors z-10"}),t.jsxs("div",{className:"bg-blue-600 p-6 text-white",children:[t.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(Ae,{})," ",s("avl:guide.helpTitle")]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx("button",{onClick:()=>J("concept"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${H==="concept"?"bg-white text-blue-600":"bg-blue-700 text-blue-200 hover:bg-blue-500"}`,children:"Operation"}),t.jsx("button",{onClick:()=>J("ui"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${H==="ui"?"bg-white text-blue-600":"bg-blue-700 text-blue-200 hover:bg-blue-500"}`,children:"Interface"})]})]}),t.jsx("div",{className:"p-8 space-y-6",children:H==="concept"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-slate-600 font-medium text-sm leading-relaxed",children:s("avl:guide.helpDesc")}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{className:"group flex gap-4 p-4 rounded-2xl bg-blue-50 border border-blue-100 transition-colors hover:bg-blue-100",children:[t.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm h-fit",children:t.jsx(ze,{className:"text-blue-600 rotate-180"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-blue-900 text-sm",children:s("avl:guide.helpRight")}),t.jsx(N,{text:s("avl:guide.helpRightDesc"),className:"text-blue-700"})]})]}),t.jsxs("div",{className:"group flex gap-4 p-4 rounded-2xl bg-indigo-50 border border-indigo-100 transition-colors hover:bg-indigo-100",children:[t.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm h-fit",children:t.jsx(ze,{className:"text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-indigo-900 text-sm",children:s("avl:guide.helpLeft")}),t.jsx(N,{text:s("avl:guide.helpLeftDesc"),className:"text-sm text-indigo-700"})]})]})]}),t.jsx("button",{onClick:()=>J("ui"),className:"w-full bg-slate-100 text-slate-500 py-4 rounded-2xl font-bold hover:bg-slate-200 active:scale-95 transition-all mt-6 text-xs uppercase tracking-widest",children:"Next: Interface Guide"})]}):t.jsxs("div",{className:"flex flex-col items-center gap-6 py-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-xl opacity-20 animate-pulse"}),t.jsx($e,{size:48,className:"text-blue-500 relative z-10"})]}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:s("avl:guide.ui.start")}),t.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:s("avl:guide.ui.startDesc")})]}),t.jsxs("button",{onClick:()=>{B(!1),xe(0)},className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-xl shadow-blue-500/20 hover:scale-105 active:scale-95 transition-all text-xs uppercase tracking-widest flex items-center gap-2",children:[s("avl:guide.ui.startBtn")," ",t.jsx(qe,{size:14})]})]})})]})}),pt(),gt()]})};export{qt as AVLTreePage};
