import{j as e,m as q,P as X,S as ce,B as de,d as G,e as pe,g as xe,h as ue,i as me,k as fe,l as ge,q as be,r as we,R as je}from"./vendor-ui-C1ZhIyyN.js";import{r as o}from"./vendor-react-B3rwDall.js";import{S as k,C as R,P as ve}from"./PlaybackControls-BPNwum8p.js";import{u as Se}from"./index-BjnknDDu.js";class Ne{heap;steps;constructor(){this.heap=[null,null],this.steps=[]}getSnapshot(){return[...this.heap]}addStep(s,t,r=[]){const n=r.map(l=>`node-${l}`);this.steps.push({type:s,message:t,targetIds:n,payload:{snapshot:this.getSnapshot()}})}insert(s){this.steps=[];const t=this.heap.length;return this.heap.push(s),this.addStep("insert",`Inserted ${s} at position ${t}`,[t]),t===2?(this.addStep("complete","First element placed in index 2"),this.steps):(this.bubbleUp(t),this.addStep("complete","Insertion complete"),this.steps)}extractMin(){if(this.steps=[],this.heap.length<=2)return this.steps;const s=this.heap[2];this.addStep("highlight",`Extracting Min: ${s}`,[2]);const t=this.heap.pop();return this.heap.length>2&&(this.heap[2]=t,this.addStep("move",`Moved last element ${t} to index 2`,[2]),this.pushDown(2)),this.addStep("complete",`Extracted Min: ${s}`),this.steps}extractMax(){if(this.steps=[],this.heap.length<=2)return this.steps;const s=this.heap.length>3?3:2,t=this.heap[s];this.addStep("highlight",`Extracting Max: ${t}`,[s]);const r=this.heap.pop();return this.heap.length>s&&(this.heap[s]=r,this.addStep("move",`Moved last element ${r} to index ${s}`,[s]),this.pushDown(s)),this.addStep("complete",`Extracted Max: ${t}`),this.steps}bubbleUp(s){let t=s;for(;t>3;){const r=Math.floor(t/4);if(r<1)break;const n=2*r,l=2*r+1;if(this.heap[t]<this.heap[n])this.addStep("highlight",`P2 Violation: ${this.heap[t]} < Min Boundary ${this.heap[n]}`,[t,n]),this.swap(t,n),t=n;else if(this.heap[t]>this.heap[l])this.addStep("highlight",`P2 Violation: ${this.heap[t]} > Max Boundary ${this.heap[l]}`,[t,l]),this.swap(t,l),t=l;else break}t%2===1&&this.heap[t]<this.heap[t-1]?(this.addStep("highlight",`P1 Violation: Right sibling ${this.heap[t]} < Left sibling ${this.heap[t-1]}`,[t,t-1]),this.swap(t,t-1),this.bubbleUp(t-1)):t%2===0&&t+1<this.heap.length&&this.heap[t]>this.heap[t+1]&&(this.addStep("highlight",`P1 Violation: Left sibling ${this.heap[t]} > Right sibling ${this.heap[t+1]}`,[t,t+1]),this.swap(t,t+1),this.bubbleUp(t+1))}pushDown(s){let t=s;for(;;){t%2===0&&t+1<this.heap.length&&this.heap[t]>this.heap[t+1]?(this.addStep("highlight","Fixing P1: Swapping siblings",[t,t+1]),this.swap(t,t+1)):t%2===1&&this.heap[t]<this.heap[t-1]&&(this.addStep("highlight","Fixing P1: Swapping siblings",[t,t-1]),this.swap(t,t-1));const r=2*t,n=2*t+1;let l=t;if(r<this.heap.length&&(t%2===0?this.heap[r]<this.heap[l]&&(l=r):this.heap[r]>this.heap[l]&&(l=r)),n<this.heap.length&&(t%2===0?this.heap[n]<this.heap[l]&&(l=n):this.heap[n]>this.heap[l]&&(l=n)),l!==t)this.addStep("highlight",`Trickle down to ${l}`,[t,l]),this.swap(t,l),t=l;else break}}swap(s,t){const r=this.heap[s];this.heap[s]=this.heap[t],this.heap[t]=r}}const g=40,Y=60,K=({value:h,index:s,highlightedIndices:t})=>{if(h===null&&s>1)return null;const r=t.includes(s),n=s%2===0,l=Math.floor(Math.log2(s)),c=s-Math.pow(2,l),d=Math.pow(2,l),p=Math.max(40,800/d),x=(c-(d-1)/2)*p,m=l*Y;return s===1?e.jsx("div",{className:"absolute flex items-center justify-center border-2 border-dashed border-slate-300 rounded-full z-10 font-bold select-none text-slate-400 bg-white",style:{width:g,height:g,marginLeft:-g/2,marginTop:-g/2,left:x,top:m},children:e.jsx("span",{className:"text-[10px]",children:"Root"})}):e.jsxs(e.Fragment,{children:[e.jsxs(q.div,{layout:!0,layoutId:`smmh-${s}`,initial:{scale:0},animate:{x,y:m,scale:1},transition:{type:"spring",stiffness:300,damping:25},className:`absolute flex items-center justify-center border-2 rounded-full shadow-md z-20 font-bold select-none
          ${r?"border-amber-500 bg-amber-100 ring-4 ring-amber-200 text-amber-900":n?"border-blue-500 bg-blue-50 text-blue-700":"border-red-500 bg-red-50 text-red-700"}
        `,style:{width:g,height:g,marginLeft:-g/2,marginTop:-g/2},children:[h,e.jsx("div",{className:"absolute -top-4 text-[9px] text-slate-400 font-mono",children:s})]}),e.jsx(ye,{index:s,x,y:m})]})},ye=({index:h,x:s,y:t})=>{const r=Math.floor(h/2),n=Math.floor(Math.log2(r)),l=r-Math.pow(2,n),c=Math.pow(2,n),d=Math.max(40,800/c),p=(l-(c-1)/2)*d,x=n*Y;return e.jsx("svg",{className:"absolute top-0 left-0 w-px h-px overflow-visible pointer-events-none z-10",children:e.jsx(q.line,{initial:{pathLength:0},animate:{x1:p,y1:x+g/2,x2:s,y2:t-g/2,pathLength:1},stroke:"#cbd5e1",strokeWidth:"2"})})},Ie=()=>{const{t:h}=Se(["common","smmh"],{useSuspense:!1}),[s]=o.useState(()=>new Ne),[t,r]=o.useState([null,null]),[n,l]=o.useState([]),[c,d]=o.useState(-1),[p,x]=o.useState([]),[m,w]=o.useState(-1),[f,M]=o.useState(!1),[L,Z]=o.useState(1),[C,D]=o.useState([]),[W,A]=o.useState(null),[S,$]=o.useState(!1),[H,V]=o.useState(""),I=o.useRef(null),[N,O]=o.useState(window.innerWidth>768),[j,z]=o.useState("logs"),[J,Q]=o.useState("menu"),[ee,te]=o.useState(320),[y,U]=o.useState(!1),se=()=>U(!0),F=()=>U(!1),_=a=>{if(y){const i=a.clientX;i>=280&&i<600&&te(i)}};o.useEffect(()=>(window.addEventListener("mousemove",_),window.addEventListener("mouseup",F),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",F)}),[y]),o.useEffect(()=>{c===-1&&(l([{id:"init",action:"Initial",steps:[],finalSnapshot:[null,null]}]),d(0))},[]),o.useEffect(()=>{if(S){const a=setTimeout(()=>$(!1),3e3);return()=>clearTimeout(a)}},[S]);const T=(a,i)=>{v(),x(i),w(0);const u=i.length>0&&i[i.length-1].payload?.snapshot?i[i.length-1].payload.snapshot:s.getSnapshot(),b=n.slice(0,c+1);b.push({id:Math.random().toString(36),action:a,steps:i,finalSnapshot:u}),l(b),d(b.length-1),E(i.length)},E=(a,i=0)=>{M(!0);let u=i;const b=()=>{u<a-1?(u++,w(u),I.current=setTimeout(b,800/L)):M(!1)};b()},v=()=>{I.current&&clearTimeout(I.current),M(!1)},ae=a=>{v(),a>=0&&a<p.length&&w(a)},ie=()=>{if(c<=0||f)return;v();const a=c-1,i=n[a];s.heap=[...i.finalSnapshot],r(i.finalSnapshot),x(i.steps),w(i.steps.length>0?i.steps.length-1:-1),d(a)},le=()=>{if(c>=n.length-1||f)return;v();const a=c+1,i=n[a];x(i.steps),w(0),d(a),i.steps.length>0?E(i.steps.length):(s.heap=[...i.finalSnapshot],r(i.finalSnapshot))};o.useEffect(()=>{if(p.length>0&&m>=0){const a=p[m];a.payload?.snapshot&&r(a.payload.snapshot);const i=(a.targetIds||[]).map(u=>parseInt(u.replace("node-",""))).filter(u=>!isNaN(u));D(i),A(a.message||null)}},[m,p]);const B=()=>{const a=parseInt(H);isNaN(a)||(T(`Insert ${a}`,s.insert(a)),V(""))},ne=()=>{t.length>2&&T("Extract Min",s.extractMin())},re=()=>{t.length>2&&T("Extract Max",s.extractMax())},oe=()=>{if(!S){$(!0);return}$(!1),f&&v(),s.heap=[null,null],r([null,null]),l([{id:"init",action:"Cleared",steps:[],finalSnapshot:[null,null]}]),d(0),x([]),w(-1),D([]),A(null)},he=()=>j!=="tutorial"?null:J==="menu"?e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"text-white font-bold mb-1",children:"SMMH Course"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Master the Symmetric Min-Max Heap properties."})]}),e.jsxs("div",{className:"text-center py-10 opacity-30",children:[e.jsx(G,{size:48,className:"mx-auto mb-4 text-slate-500"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Coming Soon"})]})]}):null;return e.jsxs("div",{className:`h-full w-full flex bg-slate-100 overflow-hidden relative font-sans text-slate-900 ${y?"cursor-col-resize select-none":""}`,children:[e.jsx("style",{children:y?"* { transition: none !important; cursor: col-resize !important; user-select: none !important; }":""}),e.jsxs("div",{style:{width:N?window.innerWidth>768?`${ee}px`:"100%":"0px"},className:`h-full flex flex-col bg-slate-900 border-r border-slate-800 shrink-0 z-[100] shadow-2xl relative ${N?"":"overflow-hidden"} ${window.innerWidth<=768?"fixed left-0 top-0":"relative"}`,children:[window.innerWidth<=768&&N&&e.jsx("button",{onClick:()=>O(!1),className:"absolute top-4 right-4 text-white z-[110]",children:e.jsx(X,{size:24})}),e.jsxs("div",{className:"flex flex-col h-full w-full",children:[e.jsxs("div",{className:"flex p-2 gap-1 bg-slate-950/50",children:[e.jsxs("button",{onClick:()=>z("logs"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${j==="logs"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(ce,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Logs"})]}),e.jsxs("button",{onClick:()=>z("wiki"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${j==="wiki"?"bg-amber-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(de,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Wiki"})]}),e.jsxs("button",{onClick:()=>{z("tutorial"),Q("menu")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${j==="tutorial"?"bg-green-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(G,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Course"})]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 font-mono text-[10px] text-slate-300 custom-scrollbar",children:[j==="logs"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.2em] mb-4",children:"History"}),n.slice(1).reverse().map((a,i)=>e.jsxs("button",{onClick:()=>{v(),x(a.steps),w(a.steps.length-1),d(n.length-1-i)},className:`w-full text-left p-3 rounded-xl border transition-all ${c===n.length-1-i?"bg-blue-600/20 border-blue-500/50 text-blue-100 shadow-inner":"bg-slate-800/30 border-slate-700/50 hover:bg-slate-800 text-slate-400"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-black uppercase tracking-wider",children:a.action}),e.jsxs("span",{className:"opacity-40 text-[8px]",children:[a.steps.length," steps"]})]}),e.jsx("div",{className:"text-[9px] opacity-60 truncate",children:a.steps[a.steps.length-1]?.message})]},a.id))]}),j==="wiki"&&e.jsxs("div",{className:"space-y-8 font-sans pb-12 text-slate-400",children:[e.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.3em]",children:"Knowledge Base"}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-blue-400 font-bold text-sm mb-2 uppercase",children:h("smmh:wiki.concept")}),e.jsx(k,{text:h("smmh:wiki.conceptDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-green-400 font-bold text-sm mb-2 uppercase",children:h("smmh:wiki.properties")}),e.jsx(k,{text:h("smmh:wiki.propertiesDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-amber-400 font-bold text-sm mb-2 uppercase",children:h("smmh:wiki.insert")}),e.jsx(k,{text:h("smmh:wiki.insertDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-red-400 font-bold text-sm mb-2 uppercase",children:h("smmh:wiki.extract")}),e.jsx(k,{text:h("smmh:wiki.extractDesc")})]})]}),j==="tutorial"&&he()]})]}),N&&window.innerWidth>768&&e.jsx("div",{onMouseDown:se,className:"absolute right-0 top-0 w-1.5 h-full cursor-col-resize z-[120] hover:bg-blue-500/50"})]}),e.jsxs("div",{className:"flex-grow flex flex-col min-w-0 h-full relative bg-white",children:[e.jsxs("div",{className:"flex-grow relative overflow-hidden bg-grid-slate-100",children:[e.jsx("button",{onClick:()=>O(!N),className:"absolute bottom-6 left-6 z-30 w-10 h-10 bg-slate-900 text-white rounded-2xl shadow-xl flex items-center justify-center hover:scale-110 active:scale-90 transition-all",children:N?e.jsx(X,{size:20}):e.jsx(pe,{size:20})}),e.jsx("div",{className:"absolute top-6 left-6 z-20 pointer-events-none",children:W&&e.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-md px-4 py-2 rounded-2xl text-white shadow-lg border border-blue-400 flex items-center gap-2 animate-in slide-in-from-left-4",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse shrink-0"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:W})]})}),e.jsx(xe,{initialScale:1,minScale:.1,maxScale:2,centerOnInit:!0,children:({zoomIn:a,zoomOut:i,resetTransform:u})=>e.jsxs(e.Fragment,{children:[e.jsx(ue,{wrapperStyle:{width:"100%",height:"100%"},children:e.jsx("div",{className:"w-[4000px] h-[4000px] relative cursor-grab active:cursor-grabbing",children:e.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",style:{overflow:"visible"},children:[e.jsx(K,{value:null,index:1,highlightedIndices:[]}),t.map((b,P)=>P>1&&e.jsx("div",{className:"absolute",style:{left:0,top:0},children:e.jsx(K,{value:b,index:P,highlightedIndices:C})},P))]})})}),e.jsxs("div",{className:"absolute bottom-6 right-6 z-20 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>a(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white active:scale-90",children:e.jsx(me,{size:20})}),e.jsx("button",{onClick:()=>i(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white active:scale-90",children:e.jsx(fe,{size:20})}),e.jsx("button",{onClick:()=>u(),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg active:scale-90 mt-2",children:e.jsx(ge,{size:20})})]})]})})]}),e.jsxs("div",{className:"bg-white border-t border-slate-200 p-3 sm:p-4 flex flex-col lg:flex-row gap-4 lg:gap-4 items-stretch overflow-visible shadow-[0_-10px_40px_rgba(0,0,0,0.03)] z-[100]",children:[e.jsxs(R,{label:"Operations",className:"w-full lg:w-[320px]",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 w-full",children:[e.jsxs("div",{className:"flex gap-2 items-center bg-white p-1 rounded-xl border border-slate-200 flex-grow overflow-hidden shadow-sm",children:[e.jsx("input",{value:H,onChange:a=>V(a.target.value),onKeyDown:a=>a.key==="Enter"&&B(),className:"flex-grow min-w-0 px-2 text-xs font-bold outline-none text-center",placeholder:"Val"}),e.jsx("button",{onClick:B,disabled:f,className:"px-4 py-1.5 bg-blue-600 text-white rounded-lg text-[11px] font-black shadow-md shrink-0 active:scale-95 transition-all",children:"INSERT"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:ne,disabled:f,className:"px-2 py-2.5 bg-blue-500 text-white rounded-xl text-[9px] font-black shadow-lg flex flex-col items-center justify-center gap-0.5 active:scale-95 transition-all shrink-0 w-[72px]",children:[e.jsx(be,{size:12})," EXTRACT MIN"]}),e.jsxs("button",{onClick:re,disabled:f,className:"px-2 py-2.5 bg-red-500 text-white rounded-xl text-[9px] font-black shadow-lg flex flex-col items-center justify-center gap-0.5 active:scale-95 transition-all shrink-0 w-[72px]",children:[e.jsx(we,{size:12})," EXTRACT MAX"]})]})]}),e.jsxs("button",{onClick:oe,disabled:f,className:`w-full flex items-center justify-center gap-2 py-1.5 border border-dashed text-[10px] font-black rounded-lg transition-all uppercase tracking-widest ${S?"bg-red-600 border-red-600 text-white animate-bounce":"border-slate-200 text-slate-400 hover:bg-red-50 hover:text-red-500"}`,children:[e.jsx(je,{size:12,className:S?"animate-spin":""})," ",S?"Confirm Reset?":"Reset Playground"]})]}),e.jsx(R,{label:"Timeline",className:"flex-grow",metadata:`Step ${Math.max(0,m+1)} / ${p.length}`,children:e.jsx(ve,{isPlaying:f,isPaused:!f,onTogglePause:()=>f?v():E(p.length,m),onGoToStep:ae,currentStep:m,totalSteps:p.length,onUndo:ie,onRedo:le,canUndo:c>0,canRedo:c<n.length-1,playbackSpeed:L,setPlaybackSpeed:Z})}),e.jsx(R,{label:"Array Representation",className:"w-full lg:w-[250px] shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto pb-2 custom-scrollbar no-pan h-full",children:[t.map((a,i)=>i>1&&e.jsxs("div",{className:`flex flex-col items-center shrink-0 group ${C.includes(i)?"scale-110":""} transition-all`,children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded border text-xs font-bold ${C.includes(i)?"bg-amber-100 border-amber-500 text-amber-900":i%2===0?"bg-blue-50 border-blue-200 text-blue-700":"bg-red-50 border-red-200 text-red-700"}`,children:a}),e.jsx("span",{className:"text-[9px] text-slate-500 font-mono font-bold",children:i})]},i)),t.length<=2&&e.jsx("span",{className:"text-xs text-slate-400 italic px-2",children:"Empty Heap"})]})})]})]})]})};export{Ie as SmmhPage};
