import{j as e,U as j,v as g,w as p,c as w,x as v,y as N,C as k,z as y,D as C}from"./vendor-ui-C-uuA98F.js";import{r as z}from"./vendor-react-CLjT99eR.js";const u=(a,n)=>a.split(/(\$\*[\s\S]+?\$|\*\*[\s\S]+?\*\*|\`[\s\S]+?\`|\*[\s\S]+?\*|\[\[[\s\S]+?\]\])/g).map((s,t)=>{if(!s)return null;if(s.startsWith("**")&&s.endsWith("**"))return e.jsx("strong",{className:"font-extrabold text-amber-400 mx-0.5",children:s.slice(2,-2)},t);if(s.startsWith("`")&&s.endsWith("`"))return e.jsx("code",{className:"bg-slate-950 px-1.5 py-0.5 rounded text-blue-300 font-mono text-[11px] border border-slate-700/50 mx-0.5 inline-block leading-none shadow-inner",children:s.slice(1,-1)},t);if(s.startsWith("*")&&s.endsWith("*"))return e.jsx("em",{className:"italic text-slate-300 opacity-80 mx-0.5",children:s.slice(1,-1)},t);if(s.startsWith("[[")&&s.endsWith("]]")){const[l,r]=s.slice(2,-2).split("|");return e.jsx("button",{onClick:()=>n?.(r),className:"text-blue-400 font-black border-b border-blue-400/30 hover:text-blue-300 transition-all cursor-pointer mx-0.5",children:l},t)}return s}),M=({text:a,className:n="",onLinkClick:i})=>{if(!a)return null;const s=a.split(`
`);return e.jsx("div",{className:`${n} space-y-2 text-[13px]`,children:s.map((t,l)=>{const r=t.trim();if(!r)return e.jsx("div",{className:"h-2"},l);if(r.startsWith("|")){if(r.includes("---"))return null;const b=r.split("|").filter((x,o,h)=>o>0&&o<h.length-1),c=l===0||s[l+1]&&s[l+1].includes("---");return e.jsx("div",{className:`flex border-b border-slate-800 py-2 gap-4 transition-colors ${c?"bg-white/5 font-bold border-b-2 border-slate-700":"hover:bg-white/5"}`,children:b.map((x,o)=>e.jsx("div",{className:`flex-1 px-2 text-sm ${c?"text-slate-100":"text-slate-400"} break-words`,children:u(x.trim(),i)},o))},l)}return r.startsWith("- ")||r.startsWith("* ")?e.jsxs("div",{className:"flex gap-3 pl-2 py-0.5",children:[e.jsx("span",{className:"text-blue-500 font-black text-xs",children:"â€¢"}),e.jsx("div",{className:"flex-grow leading-relaxed",children:u(t.trim().substring(2),i)})]},l):e.jsx("div",{className:"leading-relaxed py-0.5",children:u(t,i)},l)})})},R=({label:a,className:n="",children:i,tourId:s,metadata:t})=>e.jsxs("div",{className:`flex flex-col gap-2 bg-slate-50/50 border border-slate-100 p-2 sm:p-3 rounded-2xl ${n} ${s||""}`,children:[(a||t)&&e.jsxs("div",{className:"flex items-center justify-between mb-1 px-1",children:[a&&e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:a}),t&&e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:t})]}),i]}),E=({isPlaying:a,isPaused:n,onTogglePause:i,onGoToStep:s,currentStep:t,totalSteps:l,onUndo:r,onRedo:b,canUndo:c,canRedo:x,playbackSpeed:o,setPlaybackSpeed:h})=>{const[m,f]=z.useState(!1);return e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-grow",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:r,disabled:a||!c,className:"w-8 h-8 rounded-lg border border-slate-200 bg-white flex items-center justify-center hover:bg-slate-50 text-slate-600 transition-all shadow-sm disabled:opacity-30",children:e.jsx(j,{size:16})}),e.jsx("button",{onClick:b,disabled:a||!x,className:"w-8 h-8 rounded-lg border border-slate-200 bg-white flex items-center justify-center hover:bg-slate-50 text-slate-600 transition-all shadow-sm disabled:opacity-30",children:e.jsx(g,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("button",{onClick:()=>s(0),disabled:l===0,className:"hidden sm:block p-1.5 text-slate-400 hover:text-slate-600 transition-colors disabled:opacity-20",children:e.jsx(p,{size:14})}),e.jsx("button",{onClick:()=>s(t-1),disabled:l<=0,className:"p-1.5 text-slate-600 hover:bg-slate-50 rounded-lg transition-all disabled:opacity-20",children:e.jsx(w,{size:18})}),e.jsx("button",{onClick:i,className:"w-8 h-8 bg-slate-900 text-white rounded-lg flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-md",children:a&&!n?e.jsx(v,{size:16,fill:"currentColor"}):e.jsx(N,{size:16,fill:"currentColor"})}),e.jsx("button",{onClick:()=>s(t+1),disabled:l<=0,className:"p-1.5 text-slate-600 hover:bg-slate-50 rounded-lg transition-all disabled:opacity-20",children:e.jsx(k,{size:18})}),e.jsx("button",{onClick:()=>s(l-1),disabled:l===0,className:"hidden sm:block p-1.5 text-slate-400 hover:text-slate-600 transition-colors disabled:opacity-20",children:e.jsx(y,{size:14})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>f(!m),className:`w-8 h-8 rounded-lg border flex items-center justify-center transition-all shadow-sm ${m?"bg-blue-600 text-white border-blue-600":"bg-white border-slate-200 text-slate-400"}`,children:e.jsx(C,{size:16})}),m&&e.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-white rounded-xl shadow-2xl border border-slate-200 p-1 flex flex-col gap-0.5 z-[150] animate-in slide-in-from-bottom-2 min-w-[60px]",children:[.5,1,1.5,2,3].map(d=>e.jsxs("button",{onClick:()=>{h(d),f(!1)},className:`px-3 py-1.5 rounded-lg text-[10px] font-black transition-colors ${o===d?"bg-blue-600 text-white":"hover:bg-slate-50 text-slate-500"}`,children:[d,"x"]},d))})]})]}),e.jsx("div",{className:"flex items-center gap-3 mt-1",children:e.jsx("input",{type:"range",min:"0",max:Math.max(0,l-1),value:Math.max(0,t),onChange:d=>s(parseInt(d.target.value)),className:"flex-grow h-1 bg-slate-200 rounded-full accent-blue-600 cursor-pointer"})})]})};export{R as C,E as P,M as S};
