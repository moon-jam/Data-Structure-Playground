import{j as t,m as Oe,c as Xe,C as Qe,d as vt,X as re,I as Ae,S as wt,B as jt,e as Nt,P as yt,f as St,g as Fe,T as kt,h as It,i as Ct,k as Rt,l as $t,n as We,R as zt,U as qe,o as Ce,p as Ue}from"./vendor-ui-KJSjU0aj.js";import{r as o}from"./vendor-react-CTD4pAUy.js";import{v as Tt}from"./v4-EwEgHOG0.js";import{S as Bt}from"./SEO-Dqlw7WXN.js";import{S as N,C as Je,P as Mt}from"./PlaybackControls-Dnmiext_.js";import{C as Lt,P as Et}from"./PrerequisiteBanner-DS4sYztf.js";import{u as Pt}from"./index-Cxz-I9Lq.js";class k{id;value;height;left;right;x=0;y=0;constructor(e,l){this.id=l||Tt(),this.value=e,this.height=1,this.left=null,this.right=null}static fromJSON(e){if(!e)return null;const l=new k(e.value,e.id);return l.height=e.height,l.x=e.x||0,l.y=e.y||0,l.left=k.fromJSON(e.left),l.right=k.fromJSON(e.right),l}clone(){const e=new k(this.value,this.id);return e.height=this.height,e.x=this.x,e.y=this.y,this.left&&(e.left=this.left.clone()),this.right&&(e.right=this.right.clone()),e}}class _t{root;steps;deletionStrategy;constructor(e="successor"){this.root=null,this.steps=[],this.deletionStrategy=e}toJSON(){return JSON.stringify(this.root)}fromJSON(e){!e||e==="null"?this.root=null:this.root=k.fromJSON(JSON.parse(e))}addStep(e,l,a){this.steps.push({type:e,message:l,targetIds:a,payload:{rootSnapshot:this.root?this.root.clone():null}})}find(e){let l=this.root;for(;l;){if(e===l.value)return l;e<l.value?l=l.left:l=l.right}return null}height(e){return e?e.height:0}getBalance(e){return e?this.height(e.left)-this.height(e.right):0}patchTree(e,l){if(this.root===e)this.root=l;else{const a=this.findParent(this.root,e.value);a&&(a.left===e?a.left=l:a.right=l)}}insert(e){return this.steps=[],this.root?this.root=this._insert(this.root,e):(this.root=new k(e),this.addStep("insert",`Created root node ${e}`,[this.root.id])),this.addStep("complete",`Value ${e} insertion finished`),this.steps}_insert(e,l){if(this.addStep("highlight",`Search: ${l} at ${e.value}`,[e.id]),l<e.value)e.left?e.left=this._insert(e.left,l):(e.left=new k(l),this.addStep("insert",`Connected ${l} to the left of ${e.value}`,[e.left.id]));else if(l>e.value)e.right?e.right=this._insert(e.right,l):(e.right=new k(l),this.addStep("insert",`Connected ${l} to the right of ${e.value}`,[e.right.id]));else return e;e.height=Math.max(this.height(e.left),this.height(e.right))+1;const a=this.getBalance(e);return Math.abs(a)>1?a>1?this.getBalance(e.left)>=0?this.rightRotate(e,!1):(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):this.getBalance(e.right)<=0?this.leftRotate(e,!1):(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):(this.addStep("highlight",`Node ${e.value} balanced (BF: ${a})`,[e.id]),e)}insertManual(e){return this.steps=[],this.root?this.root=this._insertBST(this.root,e):(this.root=new k(e),this.addStep("insert",`Created root node ${e}`,[this.root.id])),this.addStep("complete","Manual insertion done"),this.steps}_insertBST(e,l){return l<e.value?e.left?e.left=this._insertBST(e.left,l):e.left=new k(l):l>e.value&&(e.right?e.right=this._insertBST(e.right,l):e.right=new k(l)),e.height=Math.max(this.height(e.left),this.height(e.right))+1,e}rotateNode(e,l){this.steps=[];const a=this.findParent(this.root,e),c=this.root?.value===e?this.root:a?.left?.value===e?a?.left:a?.right;return c?l==="left"&&!c.right?[{type:"error",message:"error.noRightChild",payload:{val:e}}]:l==="right"&&!c.left?[{type:"error",message:"error.noLeftChild",payload:{val:e}}]:(l==="left"?this.leftRotate(c,!1):this.rightRotate(c,!1),this.updateAllHeights(this.root),this.addStep("complete","Rotation finished"),this.steps):this.steps}updateAllHeights(e){return e?(e.height=Math.max(this.updateAllHeights(e.left),this.updateAllHeights(e.right))+1,e.height):0}rightRotate(e,l=!0){const a=e.left,c=a.right;return a.right=e,e.left=c,e.height=Math.max(this.height(e.left),this.height(e.right))+1,a.height=Math.max(this.height(a.left),this.height(a.right))+1,this.patchTree(e,a),l||this.addStep("rotate",`Right rotating at ${e.value}`,[e.id,a.id]),a}leftRotate(e,l=!0){const a=e.right,c=a.left;return a.left=e,e.right=c,e.height=Math.max(this.height(e.left),this.height(e.right))+1,a.height=Math.max(this.height(a.left),this.height(a.right))+1,this.patchTree(e,a),l||this.addStep("rotate",`Left rotating at ${e.value}`,[e.id,a.id]),a}delete(e){return this.steps=[],this.find(e)?(this.root=this._delete(this.root,e,!0),this.addStep("complete",`Value ${e} deletion finished`),this.steps):(this.steps.push({type:"error",message:"error.valueNotFound",targetIds:[],payload:{val:e}}),this.steps)}deleteManual(e){return this.steps=[],this.find(e)?(this.root=this._delete(this.root,e,!1),this.addStep("complete","Manual deletion done"),this.steps):(this.steps.push({type:"error",message:"error.valueNotFound",targetIds:[],payload:{val:e}}),this.steps)}_delete(e,l,a){if(!e)return null;if(this.addStep("highlight",`Searching ${l}...`,[e.id]),l<e.value)e.left=this._delete(e.left,l,a);else if(l>e.value)e.right=this._delete(e.right,l,a);else{if(this.addStep("message",`Found ${l}. Removing...`),!e.left&&!e.right)return this.addStep("delete",`Deleted leaf node ${l}`,[e.id]),null;if(!e.left)return this.addStep("move",`Replacing ${l} with right child ${e.right.value}`,[e.id,e.right.id]),e.right;if(!e.right)return this.addStep("move",`Replacing ${l} with left child ${e.left.value}`,[e.id,e.left.id]),e.left;if(this.deletionStrategy==="successor"){const u=this.minValueNode(e.right),f=e.value,b=e.id;this.addStep("highlight",`Finding successor: ${u.value}`,[u.id]),this.addStep("move",`Replace ${f} with successor ${u.value}`,[b,u.id]),e.value=u.value,e.id=u.id,e.right=this._deleteMinSilent(e.right,a),this.addStep("delete","Deleted successor node from original position",[])}else{const u=this.maxValueNode(e.left),f=e.value,b=e.id;this.addStep("highlight",`Finding predecessor: ${u.value}`,[u.id]),this.addStep("move",`Replace ${f} with predecessor ${u.value}`,[b,u.id]),e.value=u.value,e.id=u.id,e.left=this._deleteMaxSilent(e.left,a),this.addStep("delete","Deleted predecessor node from original position",[])}}if(e.height=Math.max(this.height(e.left),this.height(e.right))+1,!a)return e;const c=this.getBalance(e);return Math.abs(c)>1&&this.addStep("highlight",`Node ${e.value} is imbalanced (BF: ${c})`,[e.id]),c>1&&this.getBalance(e.left)>=0?this.rightRotate(e,!1):c>1&&this.getBalance(e.left)<0?(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):c<-1&&this.getBalance(e.right)<=0?this.leftRotate(e,!1):c<-1&&this.getBalance(e.right)>0?(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):e}_deleteMinSilent(e,l=!1){if(!e)return null;if(!e.left)return e.right;if(e.left=this._deleteMinSilent(e.left,l),e.height=Math.max(this.height(e.left),this.height(e.right))+1,!l)return e;const a=this.getBalance(e);return a>1&&this.getBalance(e.left)>=0?this.rightRotate(e,!1):a>1&&this.getBalance(e.left)<0?(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):a<-1&&this.getBalance(e.right)<=0?this.leftRotate(e,!1):a<-1&&this.getBalance(e.right)>0?(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):e}_deleteMaxSilent(e,l=!1){if(!e)return null;if(!e.right)return e.left;if(e.right=this._deleteMaxSilent(e.right,l),e.height=Math.max(this.height(e.left),this.height(e.right))+1,!l)return e;const a=this.getBalance(e);return a>1&&this.getBalance(e.left)>=0?this.rightRotate(e,!1):a>1&&this.getBalance(e.left)<0?(e.left=this.leftRotate(e.left,!1),this.rightRotate(e,!1)):a<-1&&this.getBalance(e.right)<=0?this.leftRotate(e,!1):a<-1&&this.getBalance(e.right)>0?(e.right=this.rightRotate(e.right,!1),this.leftRotate(e,!1)):e}minValueNode(e){let l=e;for(;l.left;)l=l.left;return l}maxValueNode(e){let l=e;for(;l.right;)l=l.right;return l}findParent(e,l){return!e||e.value===l?null:e.left?.value===l||e.right?.value===l?e:l<e.value?this.findParent(e.left,l):this.findParent(e.right,l)}checkBalance(e=this.root){const l=[];if(this._check(e,l,0),l.length===0)return{allIds:[],lowestId:null};const a=l.reduce((c,u)=>u.depth>c.depth?u:c);return{allIds:l.map(c=>c.id),lowestId:a.id}}_check(e,l,a){if(!e)return;const c=this.getBalance(e);(c>1||c<-1)&&l.push({id:e.id,depth:a}),this._check(e.left,l,a+1),this._check(e.right,l,a+1)}getNodeById(e){return this._getById(this.root,e)}_getById(e,l){return!e||e.id===l?e:this._getById(e.left,l)||this._getById(e.right,l)}}const xe=25,Vt=80,Re=({node:i,x:e,y:l,level:a,parentX:c,parentY:u,unbalancedIds:f=[],selectedId:b,highlightedIds:_=[],onNodeClick:V,onNodeDrag:g,onMouseEnter:H,onMouseLeave:v,getBalance:C,pulsingId:Z,showHeight:z=!0,showBF:D=!0})=>{const[ee,O]=o.useState(!1);if(!i)return null;const X=f.includes(i.id),Q=b===i.id,te=_.includes(i.id),ge=Z===i.id,G=!!g,se=C?C(i):0,R=Math.pow(2,Math.max(0,i.height-2))*50,y=i.left?.x!==void 0?i.left.x:e-R,w=i.right?.x!==void 0?i.right.x:e+R,B=i.left?.y!==void 0?i.left.y:l+Vt;return t.jsxs(t.Fragment,{children:[c!==void 0&&u!==void 0&&t.jsx("svg",{className:"absolute pointer-events-none",style:{overflow:"visible",left:0,top:0,zIndex:-1},children:t.jsx(Oe.line,{x1:c,y1:u,x2:e,y2:l,stroke:"#94a3b8",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5}})}),t.jsx(Re,{node:i.left,x:y,y:i.left?.y??B,level:a+1,parentX:e,parentY:l,unbalancedIds:f,selectedId:b,highlightedIds:_,onNodeClick:V,onNodeDrag:g,onMouseEnter:H,onMouseLeave:v,getBalance:C,pulsingId:Z,showHeight:z,showBF:D}),t.jsx(Re,{node:i.right,x:w,y:i.right?.y??B,level:a+1,parentX:e,parentY:l,unbalancedIds:f,selectedId:b,highlightedIds:_,onNodeClick:V,onNodeDrag:g,onMouseEnter:H,onMouseLeave:v,getBalance:C,pulsingId:Z,showHeight:z,showBF:D}),t.jsxs(Oe.div,{layout:!0,className:`absolute flex items-center justify-center border-2 rounded-full shadow-md z-10 transition-colors no-pan
                      ${X?"border-red-500 bg-red-50":Q?"border-blue-600 ring-4 ring-blue-200 bg-white":te?"border-yellow-500 bg-yellow-100":"border-blue-500 bg-white"}
                      ${ge?"ring-8 ring-blue-400/30 border-blue-600":""}
                      ${G?"cursor-grab active:cursor-grabbing":"cursor-pointer"}
                    `,style:{width:xe*2,height:xe*2,left:e-xe,top:l-xe,touchAction:"none"},initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},transition:{type:"spring",stiffness:260,damping:20},drag:G?"x":!1,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.2,dragSnapToOrigin:!0,onDragEnd:(M,T)=>{g&&(T.offset.x>30?g(i,"right"):T.offset.x<-30&&g(i,"left"))},onClick:M=>{M.stopPropagation(),V?.(i)},onMouseEnter:()=>{O(!0),H?.()},onMouseLeave:()=>{O(!1),v?.()},children:[G&&ee&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute -left-8 top-1/2 -translate-y-1/2 text-blue-500 opacity-70 animate-pulse",children:t.jsx(Xe,{size:18})}),t.jsx("div",{className:"absolute -right-8 top-1/2 -translate-y-1/2 text-blue-500 opacity-70 animate-pulse",children:t.jsx(Qe,{size:18})})]}),t.jsx("span",{className:`font-bold select-none ${X?"text-red-700":"text-slate-700"}`,children:i.value}),D&&t.jsxs("div",{className:`absolute -top-6 text-xs font-black px-1.5 py-0.5 rounded shadow-sm ${se>1||se<-1?"bg-red-500 text-white":"bg-slate-100 text-slate-500"}`,children:["BF:",se]}),z&&t.jsxs("div",{className:"absolute -bottom-6 text-[11px] text-slate-400 select-none uppercase tracking-tighter font-bold",children:["H:",i.height-1]})]})]})},S=[{id:"l0",type:"guided",setup:()=>{},check:i=>!(!i.root||i.root.value!==30||!i.root.left||i.root.left.value!==20||!i.root.right||i.root.right.value!==40)},{id:"l1",type:"concept",setup:i=>{[20,10,30,5].forEach(e=>i.insertManual(e))},targetVal:20},{id:"l2",type:"quiz",setup:i=>{[30,20,10].forEach(e=>i.insertManual(e))},targetVal:30,answer:2},{id:"l3",type:"guided",setup:i=>{[50,30,60,20,40,10].forEach(e=>i.insertManual(e))}},{id:"l4",type:"challenge",setup:i=>{[20,10,50,30,60,70].forEach(e=>i.insertManual(e))}},{id:"l5",type:"guided",setup:i=>{[50,20,80,10,30].forEach(e=>i.insertManual(e)),i.insertManual(25)}},{id:"l6",type:"challenge",setup:i=>{[50,20,80,70,90].forEach(e=>i.insertManual(e)),i.insertManual(75)}},{id:"l7",type:"guided",setup:i=>{[20,10,30,25,40].forEach(e=>i.insertManual(e))},targetVal:10,check:i=>{const e=(l,a)=>l?l.value===a?!0:e(l.left,a)||e(l.right,a):!1;return!e(i.root,10)}}],Ut=()=>{const{t:i}=Pt(["common","avl"],{useSuspense:!1}),[e]=o.useState(()=>new _t),[l,a]=o.useState(null),[c,u]=o.useState({allIds:[],lowestId:null}),[f,b]=o.useState(null),[_,V]=o.useState(""),[g,H]=o.useState("auto"),[v,C]=o.useState("logs"),[Z,z]=o.useState(!1),[D,ee]=o.useState("concept"),[O,X]=o.useState(null),[Q,te]=o.useState(null),[ge,G]=o.useState(!1),[se,R]=o.useState(!1),[y,w]=o.useState(null),[B,M]=o.useState(null),[T,$e]=o.useState(window.innerWidth>768),[Ge,Ke]=o.useState(320),[A,ze]=o.useState(!1),[K,fe]=o.useState(!1),ne=o.useRef(null),[L,oe]=o.useState([]),[I,F]=o.useState(-1),[$,Y]=o.useState([]),[W,E]=o.useState(-1),[j,pe]=o.useState(!1),[Ye,me]=o.useState(!1),[Te,Ze]=o.useState(1),[et,tt]=o.useState([]),[Be,st]=o.useState(null),[m,lt]=o.useState(0),[le,be]=o.useState("menu"),[q,ie]=o.useState(0),[Me,Le]=o.useState(""),[Ee,ve]=o.useState(null),[it,we]=o.useState(!1),[at,Pe]=o.useState(!1),[je,Ne]=o.useState(!1),[P,ce]=o.useState(-1),ae=s=>P===s?"z-[10001] relative ring-4 ring-yellow-400 shadow-[0_0_0_9999px_rgba(0,0,0,0.7)]":"",[_e,rt]=o.useState("successor"),ye=o.useRef(null),U=o.useRef(!1),he=s=>{if(!s)return null;let r=0;const n=(x,p)=>{x&&(n(x.left,p+1),x.x=r*60,x.y=p*80,r++,n(x.right,p+1))};n(s,0);const d=s.x,h=x=>{x&&(x.x-=d,h(x.left),h(x.right))};return h(s),s},nt=o.useCallback(()=>ze(!0),[]),Se=o.useCallback(()=>ze(!1),[]),ke=o.useCallback(s=>{if(A){const r=s.clientX;r>=320&&r<600&&Ke(r)}},[A]);o.useEffect(()=>(window.addEventListener("mousemove",ke),window.addEventListener("mouseup",Se),()=>{window.removeEventListener("mousemove",ke),window.removeEventListener("mouseup",Se)}),[ke,Se]),o.useEffect(()=>{if(I===-1){oe([{id:"init",action:"Initial",steps:[],finalSnapshot:"null"}]),F(0);const s=localStorage.getItem("ds-playground-avl-max-level");s?ie(parseInt(s)):localStorage.getItem("ds-playground-avl-tree-completed")==="true"&&ie(S.length);const r=localStorage.getItem("ds-playground-avl-tree-completed")==="true",n=localStorage.getItem("ds-playground-avl-prerequisite-seen")==="true";!r&&!s&&(localStorage.getItem("ds-playground-avl-help-seen")==="true"||(z(!0),localStorage.setItem("ds-playground-avl-help-seen","true")),C("tutorial"),n||Pe(!0))}},[]),o.useEffect(()=>{if(le==="lesson"&&!j&&m<S.length){const s=S[m];let r=!1;if(s.type==="concept")f&&s.targetVal&&f.value===s.targetVal&&(r=!0);else if(s.type==="guided"||s.type==="challenge"){const n=c.allIds.length===0,d=I>0,h=s.check?s.check(e):!0;n&&d&&h&&(r=!0)}if(r&&m>=q){const n=m+1;ie(n),localStorage.setItem("ds-playground-avl-max-level",n.toString()),n===S.length&&localStorage.setItem("ds-playground-avl-tree-completed","true")}}},[le,m,f,c,I,q,j]),o.useEffect(()=>{if($.length>0&&W>=0){const s=$[W];if(s.payload?.rootSnapshot!==void 0){const r=s.payload.rootSnapshot;r&&(e.updateAllHeights(r),he(r)),a(r),u(g==="manual"?e.checkBalance(r):{allIds:[],lowestId:null})}tt(s.targetIds||[]),st(s.message||null)}},[W,$,g,e]),o.useEffect(()=>{if(O){const s=setTimeout(()=>X(null),3e3);return()=>clearTimeout(s)}},[O]),o.useEffect(()=>{if(Q){const s=setTimeout(()=>te(null),5e3);return()=>clearTimeout(s)}},[Q]),o.useEffect(()=>{if(K){const s=setTimeout(()=>fe(!1),3e3);return()=>clearTimeout(s)}},[K]);const de=(s,r=0)=>{J(),pe(!0),me(!1),U.current=!1;let n=r;const d=()=>{if(n<s-1){if(U.current)return;n++,E(n);const h=($[n]?.type==="rotate"?1500:800)/Te;ye.current=setTimeout(d,h)}else pe(!1)};d()},J=()=>{ye.current&&clearTimeout(ye.current),pe(!1),me(!1),U.current=!1},ot=()=>{if(!j&&$.length>0){de($.length,W);return}U.current=!U.current,me(U.current),U.current||de($.length,W)},ct=s=>{J(),s>=0&&s<$.length&&E(s)},Ie=(s,r)=>{J();const n=r.find(x=>x.type==="error");if(n){X(String(i(n.message?.replace("error.","avl:error.")||"Error",n.payload)));return}R(!1),w(null),Y(r),E(0),he(e.root);const d={id:Math.random().toString(36).substr(2,9),action:s,steps:r,finalSnapshot:e.toJSON()},h=L.slice(0,I+1);h.push(d),oe(h),F(h.length-1),de(r.length)},Ve=()=>{const s=parseInt(_);isNaN(s)||(Ie(`${i("insert")} ${s}`,g==="manual"?e.insertManual(s):e.insert(s)),V(""))},ht=()=>{if(j)return;const s=f?f.value:parseInt(_);isNaN(s)||(Ie(`${i("delete")} ${s}`,g==="manual"?e.deleteManual(s):e.delete(s)),V(""),b(null))},He=()=>{if(!c.lowestId)return null;if(B&&c.allIds.includes(B))return{id:B,reason:"heuristic"};const s=e.getNodeById(c.lowestId);if(s){const r=e.findParent(l,s.value);if(r&&c.allIds.includes(r.id)){const n=e.getBalance(s),d=e.getBalance(r);if(n*d>0)return{id:r.id,reason:"heuristic"}}}return{id:c.lowestId,reason:"lowest"}},dt=(s,r)=>{if(!j){if(g==="manual"&&c.allIds.length>0&&!(y&&s.id===y)){const n=He();if(c.allIds.includes(s.id)&&n&&s.id!==n.id){const d=e.getNodeById(n.id),h=n.reason==="heuristic"?i("avl:guide.heuristicWarning"):i("avl:guide.lowestWarning");te(h+` (${i("avl:guide.recommendedTarget",{val:d?.value})})`)}}Ie(`${i(r==="left"?"avl:left":"avl:right")} @ ${s.value}`,e.rotateNode(s.value,r))}},ut=()=>{if(I>=L.length-1||j)return;J();const s=I+1,r=L[s];F(s),Y(r.steps),E(0),de(r.steps.length),R(!1)},xt=()=>{if(!K){fe(!0);return}fe(!1),j&&J(),e.root=null,a(null),u({allIds:[],lowestId:null}),b(null),oe([{id:"init",action:"Cleared",steps:[],finalSnapshot:"null"}]),F(0),Y([]),E(-1),R(!1),M(null),w(null)},ue=async s=>{if(lt(s),be("lesson"),Le(""),ve(null),e.root=null,a(null),u({allIds:[],lowestId:null}),b(null),oe([{id:"init",action:"Lesson Start",steps:[],finalSnapshot:"null"}]),F(0),Y([]),E(-1),C("tutorial"),H("manual"),s<S.length){if(S[s].setup(e),ft(e.root),S[s].targetVal){const r=(d,h)=>d?d.value===h?d.id:r(d.left,h)||r(d.right,h):null,n=r(e.root,S[s].targetVal);n&&w(n)}R(S[s].type==="guided")}},gt=()=>{if(I<=0||j)return;J();const s=I-1,r=L[s];e.fromJSON(r.finalSnapshot),e.root&&he(e.root),a(e.root?e.root.clone():null),Y(r.steps),E(r.steps.length>0?r.steps.length-1:-1),F(s),u(g==="manual"?e.checkBalance(e.root):{allIds:[],lowestId:null}),R(!1),M(null)},ft=s=>{s&&(e.updateAllHeights(s),he(s)),a(s?s.clone():null),u(e.checkBalance(s))},pt=s=>{s==="bf"&&(C("wiki"),setTimeout(()=>{ne.current?.scrollIntoView({behavior:"smooth",block:"center"}),ne.current?.classList.add("ring-2","ring-blue-500","ring-offset-4","ring-offset-slate-900"),setTimeout(()=>ne.current?.classList.remove("ring-2","ring-blue-500","ring-offset-4","ring-offset-slate-900"),2e3)},100))},mt=()=>{if(v!=="tutorial")return null;if(le==="menu")return t.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[t.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-slate-700",children:[at&&t.jsx(Et,{structureId:"avl",onDismiss:()=>{Pe(!1),localStorage.setItem("ds-playground-avl-prerequisite-seen","true")}}),t.jsx("h3",{className:"text-white font-bold mb-1",children:i("avl:tutorial.title")}),t.jsx("p",{className:"text-xs text-slate-400",children:i("avl:tutorial.welcome")})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map((n,d)=>{const h=d>q,x=d<q;return t.jsxs("button",{onClick:()=>!h&&ue(d),disabled:h,className:`p-3 rounded-xl border text-left transition-all relative overflow-hidden ${h?"bg-slate-900 border-slate-800 opacity-50 cursor-not-allowed":"bg-slate-800 border-slate-700 hover:bg-slate-700 hover:border-blue-500/50"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[t.jsxs("span",{className:`text-[10px] font-black uppercase px-1.5 py-0.5 rounded ${h?"bg-slate-800 text-slate-600":x?"bg-green-500/20 text-green-400":"bg-blue-600 text-white"}`,children:["L",d]}),x&&t.jsx(Ue,{size:14,className:"text-green-500"}),h&&t.jsx("div",{className:"text-slate-600",children:"ðŸ”’"})]}),t.jsx("div",{className:`text-xs font-bold leading-tight relative z-10 ${h?"text-slate-600":"text-slate-300"}`,children:i(`avl:tutorial.levels.${n.id}.title`)})]},n.id)})}),q>0&&t.jsxs("button",{onClick:()=>{if(!je){Ne(!0),setTimeout(()=>Ne(!1),3e3);return}localStorage.removeItem("ds-playground-avl-max-level"),localStorage.removeItem("ds-playground-avl-tree-completed"),ie(0),Ne(!1)},className:`w-full py-3 mt-2 text-[10px] font-bold rounded-xl transition-colors uppercase tracking-widest flex items-center justify-center gap-2 border ${je?"bg-red-600 border-red-600 text-white animate-pulse":"border-transparent text-red-400 hover:text-red-300 hover:bg-red-900/20 hover:border-red-900/30"}`,children:[t.jsx(We,{size:12})," ",je?"Confirm Reset?":"Reset Progress"]})]});const s=S[m],r=q>m;return t.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("button",{onClick:()=>be("menu"),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white transition-colors",children:t.jsx(Xe,{size:16})}),t.jsxs("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:["LEVEL ",m]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-xl font-bold text-white leading-tight",children:i(`avl:tutorial.levels.${s.id}.title`)}),t.jsx(N,{text:i(`avl:tutorial.levels.${s.id}.desc`),className:"text-slate-400",onLinkClick:pt}),(s.type==="guided"||s.type==="challenge")&&De(),s.type==="quiz"&&!r&&t.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 space-y-3",children:[t.jsx("p",{className:"text-sm font-bold text-slate-300",children:i("avl:tutorial.quiz.bfQuestion",{val:s.targetVal})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:Me,onChange:n=>Le(n.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-white font-mono text-center outline-none focus:border-blue-500",placeholder:"?"}),t.jsx("button",{onClick:()=>{if(parseInt(Me)===s.answer){ve("correct");const n=m+1;n>q&&(ie(n),localStorage.setItem("ds-playground-avl-max-level",n.toString()))}else ve("wrong")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs uppercase hover:bg-blue-500",children:i("avl:tutorial.quiz.submit")})]}),Ee==="correct"&&t.jsxs("div",{className:"text-green-400 text-xs font-bold flex items-center gap-1",children:[t.jsx(Ce,{size:12})," ",i("avl:tutorial.quiz.correct")]}),Ee==="wrong"&&t.jsx("div",{className:"text-red-400 text-xs font-bold",children:i("avl:tutorial.quiz.wrong",{lh:"?",rh:"?",ans:"?"})})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-800",children:[t.jsx("button",{onClick:()=>ue(m),className:"flex-1 py-3 bg-slate-800 text-slate-400 rounded-xl text-[10px] font-bold uppercase hover:bg-slate-700 transition-colors",children:i("avl:tutorial.reset")}),r&&(m<S.length-1?t.jsxs("button",{onClick:()=>ue(m+1),className:"flex-[2] py-3 bg-green-600 text-white rounded-xl text-[10px] font-bold uppercase flex items-center justify-center gap-2 hover:bg-green-500 shadow-lg shadow-green-900/20",children:[i("avl:tutorial.next")," ",t.jsx(Ce,{size:14})]}):t.jsxs("button",{onClick:()=>we(!0),className:"flex-[2] py-3 bg-blue-600 text-white rounded-xl text-[10px] font-bold uppercase flex items-center justify-center gap-2 hover:bg-blue-500 shadow-lg shadow-blue-900/20 animate-bounce",children:[i("avl:tutorial.finishBtn")," ",t.jsx(Ue,{size:14})]}))]})]})},De=()=>{if(g!=="manual"||c.allIds.length===0)return y&&w(null),B&&M(null),null;if(j)return y&&w(null),null;if(!se)return y&&w(null),t.jsx("button",{onClick:()=>R(!0),className:"w-full py-3 mb-6 bg-amber-500/10 border-2 border-dashed border-amber-500/30 rounded-2xl text-amber-500 font-black text-[10px] uppercase tracking-widest animate-pulse",children:i("avl:guide.showHint")});const s=He();if(!s)return null;const r=s.id;r!==B&&M(r);const n=e.getNodeById(r);if(!n)return null;const d=e.getBalance(n);let h,x="";if(d>1){const p=n.left;e.getBalance(p)>=0?(x=i("avl:guide.caseLL"),h=t.jsx(N,{text:i("avl:guide.actionLL",{val:n.value})}),y!==n.id&&w(n.id)):(x=i("avl:guide.caseLR"),h=t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("div",{className:"bg-blue-600 text-white text-[8px] font-black px-2 py-0.5 rounded inline-block uppercase mb-1",children:"Step 1 of 2"}),t.jsx(N,{text:i("avl:guide.actionLR_step1",{childVal:p?.value})})]}),p&&y!==p.id&&w(p.id))}else if(d<-1){const p=n.right;e.getBalance(p)<=0?(x=i("avl:guide.caseRR"),h=t.jsx(N,{text:i("avl:guide.actionRR",{val:n.value})}),y!==n.id&&w(n.id)):(x=i("avl:guide.caseRL"),h=t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("div",{className:"bg-blue-600 text-white text-[8px] font-black px-2 py-0.5 rounded inline-block uppercase mb-1",children:"Step 1 of 2"}),t.jsx(N,{text:i("avl:guide.actionRL_step1",{childVal:p?.value})})]}),p&&y!==p.id&&w(p.id))}return t.jsxs("div",{className:"bg-amber-950/50 border border-amber-500/30 p-4 rounded-xl text-amber-50 mb-6 relative group shadow-2xl animate-in slide-in-from-top-2",children:[t.jsx("button",{onClick:()=>{R(!1),w(null),M(null)},className:"absolute top-2 right-2 p-1 text-amber-500/50 hover:text-amber-500 transition-colors",children:t.jsx(re,{size:14})}),t.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-400 font-bold border-b border-amber-700/50 pb-2",children:[t.jsx(Ae,{size:18}),t.jsx("span",{children:"Advice"})]}),t.jsxs("div",{className:"mb-2 py-1 px-2 bg-blue-500/20 text-blue-300 text-[8px] font-black rounded border border-blue-500/30 inline-block uppercase tracking-widest",children:["Focus: Node ",n.value]}),t.jsx("h4",{className:"font-bold text-amber-200 mb-2",children:x}),t.jsx("div",{className:"text-sm leading-relaxed",children:h})]})},bt=()=>{if(P===-1)return null;const s=[{title:i("avl:guide.ui.mode"),pos:"top-34 left-88"},{title:i("avl:guide.ui.sidebar"),pos:"top-1/2 left-80"},{title:i("avl:guide.ui.canvas"),pos:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},{title:i("avl:guide.ui.action"),pos:"bottom-26 left-88"},{title:i("avl:guide.ui.timeline"),pos:"bottom-26 right-80"}],r=s[P];return r?t.jsxs("div",{className:`fixed ${r.pos} z-[10002] bg-slate-900 text-white p-4 rounded-xl shadow-2xl max-w-xs animate-in zoom-in-95 border border-slate-700`,children:[t.jsx("h4",{className:"font-bold mb-3 text-sm leading-relaxed",children:r.title}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{onClick:()=>ce(-1),className:"text-slate-400 hover:text-white text-[10px] font-bold px-2 uppercase tracking-wider",children:"Exit"}),P>0&&t.jsx("button",{onClick:()=>ce(P-1),className:"bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider",children:"Prev"}),t.jsx("button",{onClick:()=>ce(P<s.length-1?P+1:-1),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider",children:P<s.length-1?"Next":"Finish"})]})]}):null};return t.jsxs("div",{className:`h-full w-full flex bg-slate-100 overflow-hidden relative font-sans text-slate-900 ${A?"cursor-col-resize select-none":""}`,children:[t.jsx(Bt,{title:"AVL Tree Visualization",description:"Interactive AVL Tree visualization. Learn how self-balancing binary search trees work with step-by-step animations.",keywords:["AVL Tree","Balanced Binary Search Tree","BS Tree","Visualization","Algorithm"]}),t.jsx("style",{children:A?"* { transition: none !important; cursor: col-resize !important; user-select: none !important; }":""}),O&&t.jsxs("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-[10000] bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 border border-red-400 animate-in fade-in slide-in-from-top-4",children:[t.jsx(vt,{size:20,className:"shrink-0"}),t.jsx(N,{text:O,className:"text-white font-bold"}),t.jsx(re,{size:18,onClick:()=>X(null),className:"cursor-pointer hover:bg-white/20 rounded-full"})]}),Q&&t.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-[9999] bg-amber-500 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 border border-amber-400 animate-in fade-in slide-in-from-top-4",children:[t.jsx(Ae,{size:20,className:"shrink-0"}),t.jsx(N,{text:Q,className:"text-white font-bold"}),t.jsx(re,{size:18,onClick:()=>te(null),className:"cursor-pointer hover:bg-white/20 rounded-full"})]}),t.jsxs("div",{style:{width:T?window.innerWidth>768?`${Ge}px`:"100%":"0px",transition:A?"none":"width 300ms ease-in-out"},className:`h-full flex flex-col bg-slate-900 border-r border-slate-800 shrink-0 z-[100] shadow-2xl relative ${T?"":"overflow-hidden"} ${window.innerWidth<=768?"fixed left-0 top-0":"relative"} ${ae(1)}`,children:[window.innerWidth<=768&&T&&t.jsx("button",{onClick:()=>$e(!1),className:"absolute top-4 right-4 text-white z-[110]",children:t.jsx(re,{size:24})}),t.jsxs("div",{className:"flex flex-col h-full w-full",children:[t.jsxs("div",{className:"flex p-2 gap-1 bg-slate-950/50",children:[t.jsxs("button",{onClick:()=>C("logs"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${v==="logs"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(wt,{size:14}),t.jsx("span",{className:"hidden sm:inline",children:"Logs"})]}),t.jsxs("button",{onClick:()=>C("wiki"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${v==="wiki"?"bg-amber-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(jt,{size:14}),t.jsx("span",{className:"hidden sm:inline",children:"Wiki"})]}),t.jsxs("button",{onClick:()=>ue(0),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${v==="tutorial"?"bg-green-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[t.jsx(Nt,{size:14}),t.jsx("span",{className:"hidden sm:inline",children:"Course"})]})]}),t.jsxs("div",{className:"flex-grow overflow-y-auto p-4 font-mono text-[10px] text-slate-300 custom-scrollbar",children:[v==="logs"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.2em] mb-4",children:"History"}),De(),L.slice(1).reverse().map((s,r)=>t.jsxs("button",{onClick:()=>{J();const n=L.length-1-r;e.fromJSON(s.finalSnapshot),Y(s.steps),E(s.steps.length-1),F(n)},className:`w-full text-left p-3 rounded-xl border transition-all ${I===L.length-1-r?"bg-blue-600/20 border-blue-500/50 text-blue-100 shadow-inner":"bg-slate-800/30 border-slate-700/50 hover:bg-slate-800 text-slate-400"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"font-black uppercase tracking-wider",children:s.action}),t.jsxs("span",{className:"opacity-40 text-[8px]",children:[s.steps.length," steps"]})]}),t.jsx("div",{className:"text-[9px] opacity-60 truncate",children:s.steps[s.steps.length-1]?.message})]},s.id))]}),v==="wiki"&&t.jsxs("div",{className:"space-y-8 font-sans pb-12 text-slate-400",children:[t.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.3em]",children:"Knowledge Base"}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-blue-400 font-bold text-sm mb-2 uppercase",children:"Definition"}),t.jsx(N,{text:i("avl:wiki.conceptDesc")})]}),t.jsx("div",{ref:ne,className:"bg-slate-950/50 p-4 rounded-2xl border border-slate-800 text-center transition-all duration-500",children:t.jsx("code",{className:"text-blue-400 font-bold text-sm",children:"BF = H(L) - H(R)"})}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-amber-400 font-bold text-sm mb-2 uppercase",children:"Deletion"}),t.jsx(N,{text:i("avl:wiki.deletionDesc")})]}),t.jsxs("section",{className:"space-y-3",children:[t.jsx("h4",{className:"text-indigo-400 font-bold text-sm mb-2 uppercase",children:"Strategies"}),t.jsx("div",{className:"grid gap-3",children:["LL","RR","LR","RL"].map(s=>t.jsxs("div",{className:"p-3 rounded-xl bg-slate-800/50 border border-slate-700/50",children:[t.jsx("div",{className:"text-white font-bold text-xs mb-1",children:i(`avl:wiki.case${s}`)}),t.jsx(N,{text:i(`avl:wiki.case${s}Desc`)})]},s))})]}),t.jsxs("section",{children:[t.jsx("h4",{className:"text-green-400 font-bold text-sm mb-2 uppercase",children:"Complexity"}),t.jsx(N,{text:i("avl:wiki.compTable")})]})]}),v==="tutorial"&&mt()]})]}),T&&window.innerWidth>768&&t.jsx("div",{onMouseDown:nt,className:`absolute right-0 top-0 w-1.5 h-full cursor-col-resize z-[120] hover:bg-blue-500/50 transition-colors ${A?"bg-blue-600":""}`})]}),t.jsxs("div",{className:"flex-grow flex flex-col min-w-0 h-full relative bg-white",children:[t.jsxs("div",{className:`flex-grow relative bg-slate-50 overflow-hidden ${A?"pointer-events-none":""}`,children:[t.jsx("button",{onClick:()=>$e(!T),className:"absolute bottom-6 left-6 z-30 w-10 h-10 bg-slate-900 text-white rounded-2xl shadow-xl flex items-center justify-center hover:scale-110 active:scale-90 transition-all",children:T?t.jsx(yt,{size:20}):t.jsx(St,{size:20})}),t.jsxs("div",{className:"absolute top-4 sm:top-6 left-4 sm:left-6 flex flex-col sm:flex-row gap-3 z-20 pointer-events-none max-w-[calc(100%-80px)]",children:[t.jsxs("div",{className:`bg-white/80 backdrop-blur-md px-3 sm:px-4 py-1.5 sm:py-2 rounded-2xl border border-slate-200 shadow-sm flex items-center gap-2 sm:gap-3 pointer-events-auto w-fit ${ae(0)}`,children:[t.jsx("button",{onClick:()=>H("auto"),className:`px-2 sm:px-3 py-1 text-[8px] sm:text-[10px] font-black rounded-lg transition-all ${g==="auto"?"bg-blue-600 text-white shadow-lg shadow-blue-200":"text-slate-400 hover:text-slate-600"}`,children:"AUTO"}),t.jsx("button",{onClick:()=>H("manual"),className:`px-2 sm:px-3 py-1 text-[8px] sm:text-[10px] font-black rounded-lg transition-all ${g==="manual"?"bg-amber-500 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"MANUAL"})]}),Be&&t.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-md px-3 sm:px-4 py-1.5 sm:py-2 rounded-2xl text-white shadow-lg border border-blue-400 flex items-center gap-2 animate-in slide-in-from-left-4 overflow-hidden w-fit pointer-events-auto",children:[t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-white animate-pulse shrink-0"}),t.jsx("span",{className:"text-[8px] sm:text-[10px] font-black uppercase tracking-wider truncate max-w-[150px] sm:max-w-none",children:Be})]})]}),t.jsx("button",{onClick:()=>z(!0),className:"absolute top-6 right-6 w-10 h-10 bg-white/80 backdrop-blur-md border border-slate-200 rounded-2xl flex items-center justify-center text-slate-400 hover:text-blue-600 shadow-sm z-20",children:t.jsx(Fe,{size:20})}),t.jsx(kt,{initialScale:1,minScale:.1,maxScale:2,limitToBounds:!1,centerOnInit:!0,panning:{disabled:ge,excluded:["no-pan"]},children:({zoomIn:s,zoomOut:r,resetTransform:n})=>t.jsxs(t.Fragment,{children:[t.jsx(It,{wrapperStyle:{width:"100%",height:"100%"},contentStyle:{width:"100%",height:"100%",overflow:"visible"},children:t.jsx("div",{className:`relative cursor-grab active:cursor-grabbing bg-grid-slate-100 ${ae(2)}`,style:{width:"20000px",height:"20000px"},onClick:()=>b(null),children:t.jsx("div",{className:"absolute left-1/2 top-[100px] -translate-x-1/2",style:{overflow:"visible"},children:t.jsx(Re,{node:l,x:l?l.x:0,y:l?l.y:0,level:0,unbalancedIds:c.allIds,selectedId:f?.id,highlightedIds:et,pulsingId:y,onNodeClick:b,onNodeDrag:g==="manual"?dt:void 0,onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),getBalance:d=>e.getBalance(d),showHeight:!(v==="tutorial"&&le==="lesson"&&m<=1),showBF:!(v==="tutorial"&&le==="lesson"&&m<=2)})})})}),t.jsxs("div",{className:"absolute bottom-6 right-6 z-20 flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>s(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white transition-all active:scale-90",children:t.jsx(Ct,{size:20})}),t.jsx("button",{onClick:()=>r(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white transition-all active:scale-90",children:t.jsx(Rt,{size:20})}),t.jsx("button",{onClick:()=>n(),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg hover:bg-blue-700 transition-all active:scale-90 mt-2",children:t.jsx($t,{size:20})})]})]})})]}),t.jsxs("div",{className:"bg-white border-t border-slate-200 p-3 sm:p-4 flex flex-col lg:flex-row gap-4 lg:gap-4 items-stretch overflow-visible shadow-[0_-10px_40px_rgba(0,0,0,0.03)] z-[100]",children:[t.jsxs(Je,{label:i("avl:bottomBar.operations"),tourId:ae(3),className:"w-full lg:w-[320px]",children:[t.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 w-full",children:[t.jsxs("div",{className:"flex gap-2 items-center bg-white p-1 rounded-xl border border-slate-200 flex-grow overflow-hidden shadow-sm",children:[t.jsx("input",{type:"number",value:_,onChange:s=>V(s.target.value),onKeyDown:s=>s.key==="Enter"&&Ve(),placeholder:"Val",className:"flex-grow min-w-0 px-2 py-1.5 bg-transparent outline-none font-bold text-xs text-center text-slate-900"}),t.jsx("button",{onClick:Ve,disabled:j,className:`px-4 py-1.5 rounded-lg font-black text-white text-[11px] shadow-md shrink-0 transition-all active:scale-95 ${g==="manual"?"bg-amber-500 hover:bg-amber-600":"bg-blue-600 hover:bg-blue-700"}`,children:"INSERT"})]}),t.jsxs("button",{onClick:ht,disabled:j,className:`px-4 py-2.5 rounded-xl font-black text-white text-[11px] shadow-lg flex items-center gap-2 transition-all active:scale-95 shrink-0 ${f?"bg-red-600 hover:bg-red-700":"bg-slate-300"}`,children:[t.jsx(We,{size:12}),t.jsx("span",{className:"hidden sm:inline",children:"DELETE"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx("span",{className:"text-slate-500 font-bold",children:"Delete Strategy:"}),t.jsx("button",{onClick:()=>{const s=_e==="successor"?"predecessor":"successor";e.deletionStrategy=s,rt(s)},className:"flex-1 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg font-bold transition-all text-[10px] uppercase tracking-wider",children:_e==="successor"?"ðŸ“ Inorder Successor":"ðŸ“ Inorder Predecessor"})]}),t.jsxs("button",{onClick:xt,disabled:j,className:`w-full flex items-center justify-center gap-2 py-1.5 border border-dashed text-[10px] font-black rounded-lg transition-all uppercase tracking-widest ${K?"bg-red-600 border-red-600 text-white animate-bounce":"border-slate-200 text-slate-400 hover:bg-red-50 hover:text-red-500"}`,children:[t.jsx(zt,{size:12,className:K?"animate-spin":""})," ",K?"Confirm Reset?":"Reset Playground"]})]}),t.jsx(Je,{label:i("avl:bottomBar.timeline"),tourId:ae(4),className:"flex-grow",metadata:`Step ${Math.max(0,W+1)} / ${$.length}`,children:t.jsx(Mt,{isPlaying:j,isPaused:Ye,onTogglePause:ot,onGoToStep:ct,currentStep:W,totalSteps:$.length,onUndo:gt,onRedo:ut,canUndo:I>0,canRedo:I<L.length-1,playbackSpeed:Te,setPlaybackSpeed:Ze})}),t.jsxs("div",{className:"flex w-full lg:w-[160px] flex-row lg:flex-col gap-2 bg-slate-50/50 border border-slate-100 p-2 sm:p-3 rounded-2xl shrink-0",children:[t.jsxs("div",{className:"flex-1 lg:flex-none flex flex-col gap-1",children:[t.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] px-1 hidden lg:block",children:i("avl:bottomBar.stats")}),t.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("span",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest",children:"Height"}),t.jsx("span",{className:"text-xs font-black text-blue-700 font-mono",children:l?l.height:0})]})]}),t.jsx("div",{className:"flex-1 lg:flex-none flex flex-col gap-1",children:t.jsxs("div",{className:`flex justify-between items-center p-2 rounded-xl border shadow-sm ${c.allIds.length>0?"bg-red-50 border-red-100 text-red-600":"bg-green-50 border-green-100 text-green-600"}`,children:[t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Status"}),t.jsx("span",{className:"text-xs font-black uppercase font-mono",children:c.allIds.length>0?"Error":"Stable"})]})})]})]})]}),Z&&t.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-slate-900/60 p-4 backdrop-blur-sm animate-in fade-in",onClick:s=>{s.target===s.currentTarget&&z(!1)},children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden relative animate-in zoom-in-95 duration-200",children:[t.jsx(re,{onClick:()=>z(!1),className:"absolute top-6 right-6 cursor-pointer text-slate-400 hover:text-slate-600 transition-colors z-10"}),t.jsxs("div",{className:"bg-blue-600 p-6 text-white",children:[t.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(Fe,{})," ",i("avl:guide.helpTitle")]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx("button",{onClick:()=>ee("concept"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${D==="concept"?"bg-white text-blue-600":"bg-blue-700 text-blue-200 hover:bg-blue-500"}`,children:"Operation"}),t.jsx("button",{onClick:()=>ee("ui"),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${D==="ui"?"bg-white text-blue-600":"bg-blue-700 text-blue-200 hover:bg-blue-500"}`,children:"Interface"})]})]}),t.jsx("div",{className:"p-8 space-y-6",children:D==="concept"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-slate-600 font-medium text-sm leading-relaxed",children:i("avl:guide.helpDesc")}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{className:"group flex gap-4 p-4 rounded-2xl bg-blue-50 border border-blue-100 transition-colors hover:bg-blue-100",children:[t.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm h-fit",children:t.jsx(qe,{className:"text-blue-600 rotate-180"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-blue-900 text-sm",children:i("avl:guide.helpRight")}),t.jsx(N,{text:i("avl:guide.helpRightDesc"),className:"text-blue-700"})]})]}),t.jsxs("div",{className:"group flex gap-4 p-4 rounded-2xl bg-indigo-50 border border-indigo-100 transition-colors hover:bg-indigo-100",children:[t.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm h-fit",children:t.jsx(qe,{className:"text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-indigo-900 text-sm",children:i("avl:guide.helpLeft")}),t.jsx(N,{text:i("avl:guide.helpLeftDesc"),className:"text-sm text-indigo-700"})]})]})]}),t.jsx("button",{onClick:()=>ee("ui"),className:"w-full bg-slate-100 text-slate-500 py-4 rounded-2xl font-bold hover:bg-slate-200 active:scale-95 transition-all mt-6 text-xs uppercase tracking-widest",children:"Next: Interface Guide"})]}):t.jsxs("div",{className:"flex flex-col items-center gap-6 py-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-xl opacity-20 animate-pulse"}),t.jsx(Ce,{size:48,className:"text-blue-500 relative z-10"})]}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:i("avl:guide.ui.start")}),t.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:i("avl:guide.ui.startDesc")})]}),t.jsxs("button",{onClick:()=>{z(!1),ce(0)},className:"px-8 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-xl shadow-blue-500/20 hover:scale-105 active:scale-95 transition-all text-xs uppercase tracking-widest flex items-center gap-2",children:[i("avl:guide.ui.startBtn")," ",t.jsx(Qe,{size:14})]})]})})]})}),bt(),t.jsx(Lt,{show:it,title:i("avl:tutorial.congratsTitle"),description:i("avl:tutorial.congratsDesc"),onClose:()=>we(!1),onBackToMenu:()=>{we(!1),be("menu")},backToMenuText:i("avl:tutorial.backToMenu")})]})};export{Ut as AVLTreePage};
