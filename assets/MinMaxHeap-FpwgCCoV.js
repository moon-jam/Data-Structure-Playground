import{j as e,m as G,P as B,S as re,B as oe,d as F,e as he,g as ce,h as pe,i as de,k as xe,l as ue,q as me,r as fe,R as ge}from"./vendor-ui-C1ZhIyyN.js";import{r}from"./vendor-react-B3rwDall.js";import{S as k,C as T,P as be}from"./PlaybackControls-BPNwum8p.js";import{u as we}from"./index-DDjmoBQ4.js";class ve{heap;steps;constructor(){this.heap=[],this.steps=[]}getSnapshot(){return[...this.heap]}addStep(s,t,i=[]){const a=i.map(c=>`node-${c}`);this.steps.push({type:s,message:t,targetIds:a,payload:{snapshot:this.getSnapshot()}})}insert(s){this.steps=[],this.heap.push(s);const t=this.heap.length-1;return this.addStep("insert",`Inserted ${s} at index ${t}`,[t]),this.pushUp(t),this.addStep("complete",`Insertion of ${s} complete`),this.steps}extractMin(){if(this.steps=[],this.heap.length===0)return this.steps;const s=this.heap[0];this.addStep("highlight",`Extracting Min: ${s}`,[0]);const t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,this.addStep("move",`Moved last element ${t} to root`,[0]),this.pushDown(0)),this.addStep("complete",`Extracted Min: ${s}`),this.steps}extractMax(){if(this.steps=[],this.heap.length===0)return this.steps;if(this.heap.length===1){const a=this.heap.pop();return this.addStep("complete",`Extracted Max: ${a}`),this.steps}let s=1;this.heap.length>2&&this.heap[2]>this.heap[1]&&(s=2);const t=this.heap[s];this.addStep("highlight",`Extracting Max: ${t}`,[s]);const i=this.heap.pop();return s<this.heap.length&&(this.heap[s]=i,this.addStep("move",`Moved last element ${i} to index ${s}`,[s]),this.pushDown(s)),this.addStep("complete",`Extracted Max: ${t}`),this.steps}pushUp(s){if(s===0)return;const t=Math.floor((s-1)/2);this.isMinLevel(s)?this.heap[s]>this.heap[t]?(this.addStep("highlight",`${this.heap[s]} > parent ${this.heap[t]} (Min Level Violation)`,[s,t]),this.swap(s,t),this.pushUpMax(t)):this.pushUpMin(s):this.heap[s]<this.heap[t]?(this.addStep("highlight",`${this.heap[s]} < parent ${this.heap[t]} (Max Level Violation)`,[s,t]),this.swap(s,t),this.pushUpMin(t)):this.pushUpMax(s)}pushUpMin(s){const t=Math.floor((Math.floor((s-1)/2)-1)/2);t>=0&&this.heap[s]<this.heap[t]&&(this.addStep("highlight",`Min Level: ${this.heap[s]} < grandparent ${this.heap[t]}`,[s,t]),this.swap(s,t),this.pushUpMin(t))}pushUpMax(s){const t=Math.floor((Math.floor((s-1)/2)-1)/2);t>=0&&this.heap[s]>this.heap[t]&&(this.addStep("highlight",`Max Level: ${this.heap[s]} > grandparent ${this.heap[t]}`,[s,t]),this.swap(s,t),this.pushUpMax(t))}pushDown(s){this.isMinLevel(s)?this.pushDownMin(s):this.pushDownMax(s)}pushDownMin(s){let t=s;const i=this.getDescendants(s);if(i.length!==0){for(const a of i)this.heap[a]<this.heap[t]&&(t=a);if(t!==s&&(this.addStep("highlight",`Min Level: Swapping with smallest descendant ${this.heap[t]}`,[s,t]),this.swap(s,t),t>=4*s+3)){const a=Math.floor((t-1)/2);this.heap[t]>this.heap[a]&&(this.addStep("highlight",`Swap back: ${this.heap[t]} > parent ${this.heap[a]}`,[t,a]),this.swap(t,a)),this.pushDownMin(t)}}}pushDownMax(s){let t=s;const i=this.getDescendants(s);if(i.length!==0){for(const a of i)this.heap[a]>this.heap[t]&&(t=a);if(t!==s&&(this.addStep("highlight",`Max Level: Swapping with largest descendant ${this.heap[t]}`,[s,t]),this.swap(s,t),t>=4*s+3)){const a=Math.floor((t-1)/2);this.heap[t]<this.heap[a]&&(this.addStep("highlight",`Swap back: ${this.heap[t]} < parent ${this.heap[a]}`,[t,a]),this.swap(t,a)),this.pushDownMax(t)}}}getDescendants(s){const t=[],i=2*s+1,a=2*s+2;i<this.heap.length&&t.push(i),a<this.heap.length&&t.push(a);const c=2*i+1,x=2*i+2,u=2*a+1,o=2*a+2;return c<this.heap.length&&t.push(c),x<this.heap.length&&t.push(x),u<this.heap.length&&t.push(u),o<this.heap.length&&t.push(o),t}isMinLevel(s){return Math.floor(Math.log2(s+1))%2===0}swap(s,t){const i=this.heap[s];this.heap[s]=this.heap[t],this.heap[t]=i}}const v=40,K=60,je=h=>Math.floor(Math.log2(h+1))%2===0,Me=({value:h,index:s,highlightedIndices:t})=>{const i=t.includes(s),a=je(s),c=Math.floor(Math.log2(s+1)),x=s-(Math.pow(2,c)-1),u=Math.pow(2,c),o=Math.max(40,800/Math.pow(2,c)),m=(x-(u-1)/2)*o,p=c*K;return e.jsxs(e.Fragment,{children:[e.jsxs(G.div,{layout:!0,initial:{scale:0},animate:{x:m,y:p,scale:1},transition:{type:"spring",stiffness:300,damping:25},className:`absolute flex items-center justify-center border-2 rounded-full shadow-md z-20 font-bold select-none
          ${i?"border-amber-500 bg-amber-100 ring-4 ring-amber-200 text-amber-900":a?"border-blue-500 bg-blue-50 text-blue-700":"border-red-500 bg-red-50 text-red-700"}
        `,style:{width:v,height:v,marginLeft:-v/2,marginTop:-v/2},children:[h,e.jsx("div",{className:"absolute -top-4 text-[9px] text-slate-400 font-mono",children:s})]}),s>0&&e.jsx(Ne,{index:s,x:m,y:p})]})},Ne=({index:h,x:s,y:t})=>{const i=Math.floor((h-1)/2),a=Math.floor(Math.log2(i+1)),c=i-(Math.pow(2,a)-1),x=Math.pow(2,a),u=Math.max(40,800/Math.pow(2,a)),o=(c-(x-1)/2)*u,m=a*K;return e.jsx("svg",{className:"absolute top-0 left-0 w-px h-px overflow-visible pointer-events-none z-10",children:e.jsx(G.line,{initial:{pathLength:0},animate:{x1:o,y1:m+v/2,x2:s,y2:t-v/2,pathLength:1},stroke:"#cbd5e1",strokeWidth:"2"})})},Ce=()=>{const{t:h}=we(["common","minmax"],{useSuspense:!1}),[s]=r.useState(()=>new ve),[t,i]=r.useState([]),[a,c]=r.useState([]),[x,u]=r.useState(-1),[o,m]=r.useState([]),[p,j]=r.useState(-1),[f,y]=r.useState(!1),[D,q]=r.useState(1),[$,Y]=r.useState([]),[R,Z]=r.useState(null),[b,C]=r.useState(!1),[P,U]=r.useState(""),z=r.useRef(null),[w,W]=r.useState(window.innerWidth>768),[g,I]=r.useState("logs"),[J,Q]=r.useState("menu"),[ee,te]=r.useState(320),[M,A]=r.useState(!1),se=()=>A(!0),H=()=>A(!1),V=n=>{if(M){const l=n.clientX;l>=280&&l<600&&te(l)}};r.useEffect(()=>(window.addEventListener("mousemove",V),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",H)}),[M]),r.useEffect(()=>{if(b){const n=setTimeout(()=>C(!1),3e3);return()=>clearTimeout(n)}},[b]),r.useEffect(()=>{x===-1&&(c([{id:"init",action:"Initial",steps:[]}]),u(0))},[]);const L=(n,l)=>{N(),m(l),j(0),c([...a.slice(0,x+1),{id:Math.random().toString(36),action:n,steps:l}]),u(d=>d+1),O(l.length)},O=(n,l=0)=>{y(!0);let d=l;const S=()=>{d<n-1?(d++,j(d),z.current=setTimeout(S,800/D)):y(!1)};S()},N=()=>{z.current&&clearTimeout(z.current),y(!1)},E=n=>{N(),n>=0&&n<o.length&&j(n)};r.useEffect(()=>{if(o.length>0&&p>=0){const n=o[p];n.payload?.snapshot&&i(n.payload.snapshot);const l=(n.targetIds||[]).map(d=>parseInt(d.replace("node-",""))).filter(d=>!isNaN(d));Y(l),Z(n.message||null)}},[p,o]);const _=()=>{const n=parseInt(P);isNaN(n)||(L(`Insert ${n}`,s.insert(n)),U(""))},ae=()=>{t.length>0&&L("Extract Min",s.extractMin())},ne=()=>{t.length>0&&L("Extract Max",s.extractMax())},ie=()=>{if(!b){C(!0);return}C(!1),window.location.reload()},le=()=>g!=="tutorial"?null:J==="menu"?e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"p-4 bg-slate-800 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"text-white font-bold mb-1",children:"Min-Max Heap Course"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Master the alternating levels of a Min-Max Heap."})]}),e.jsxs("div",{className:"text-center py-10 opacity-30",children:[e.jsx(F,{size:48,className:"mx-auto mb-4 text-slate-500"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Levels Coming Soon"})]})]}):null;return e.jsxs("div",{className:`h-full w-full flex bg-slate-100 overflow-hidden relative font-sans text-slate-900 ${M?"cursor-col-resize select-none":""}`,children:[e.jsx("style",{children:M?"* { transition: none !important; cursor: col-resize !important; user-select: none !important; }":""}),e.jsxs("div",{style:{width:w?window.innerWidth>768?`${ee}px`:"100%":"0px"},className:`h-full flex flex-col bg-slate-900 border-r border-slate-800 shrink-0 z-[100] shadow-2xl relative ${w?"":"overflow-hidden"} ${window.innerWidth<=768?"fixed left-0 top-0":"relative"}`,children:[window.innerWidth<=768&&w&&e.jsx("button",{onClick:()=>W(!1),className:"absolute top-4 right-4 text-white z-[110]",children:e.jsx(B,{size:24})}),e.jsxs("div",{className:"flex flex-col h-full w-full",children:[e.jsxs("div",{className:"flex p-2 gap-1 bg-slate-950/50",children:[e.jsxs("button",{onClick:()=>I("logs"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${g==="logs"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(re,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Logs"})]}),e.jsxs("button",{onClick:()=>I("wiki"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${g==="wiki"?"bg-amber-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(oe,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Wiki"})]}),e.jsxs("button",{onClick:()=>{I("tutorial"),Q("menu")},className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-[9px] sm:text-[10px] font-black uppercase transition-all ${g==="tutorial"?"bg-green-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(F,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Course"})]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 font-mono text-[10px] text-slate-300 custom-scrollbar",children:[g==="logs"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.2em] mb-4",children:"History"}),a.slice(1).reverse().map((n,l)=>e.jsxs("button",{onClick:()=>{N(),m(n.steps),j(n.steps.length-1),u(a.length-1-l)},className:`w-full text-left p-3 rounded-xl border transition-all ${x===a.length-1-l?"bg-blue-600/20 border-blue-500/50 text-blue-100 shadow-inner":"bg-slate-800/30 border-slate-700/50 hover:bg-slate-800 text-slate-400"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-black uppercase tracking-wider",children:n.action}),e.jsxs("span",{className:"opacity-40 text-[8px]",children:[n.steps.length," steps"]})]}),e.jsx("div",{className:"text-[9px] opacity-60 truncate",children:n.steps[n.steps.length-1]?.message})]},n.id))]}),g==="wiki"&&e.jsxs("div",{className:"space-y-8 font-sans pb-12 text-slate-400",children:[e.jsx("h3",{className:"text-white font-black text-xs uppercase tracking-[0.3em]",children:"Knowledge Base"}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-blue-400 font-bold text-sm mb-2 uppercase",children:h("minmax:wiki.concept")}),e.jsx(k,{text:h("minmax:wiki.conceptDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-green-400 font-bold text-sm mb-2 uppercase",children:h("minmax:wiki.levels")}),e.jsx(k,{text:h("minmax:wiki.levelsDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-amber-400 font-bold text-sm mb-2 uppercase",children:h("minmax:wiki.insert")}),e.jsx(k,{text:h("minmax:wiki.insertDesc")})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-red-400 font-bold text-sm mb-2 uppercase",children:h("minmax:wiki.extract")}),e.jsx(k,{text:h("minmax:wiki.extractDesc")})]})]}),g==="tutorial"&&le()]})]}),w&&window.innerWidth>768&&e.jsx("div",{onMouseDown:se,className:"absolute right-0 top-0 w-1.5 h-full cursor-col-resize z-[120] hover:bg-blue-500/50"})]}),e.jsxs("div",{className:"flex-grow flex flex-col min-w-0 h-full relative bg-white",children:[e.jsxs("div",{className:"flex-grow relative overflow-hidden bg-grid-slate-100",children:[e.jsx("button",{onClick:()=>W(!w),className:"absolute bottom-6 left-6 z-30 w-10 h-10 bg-slate-900 text-white rounded-2xl shadow-xl flex items-center justify-center hover:scale-110 active:scale-90 transition-all",children:w?e.jsx(B,{size:20}):e.jsx(he,{size:20})}),e.jsx("div",{className:"absolute top-6 left-6 z-20 pointer-events-none",children:R&&e.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-md px-4 py-2 rounded-2xl text-white shadow-lg border border-blue-400 flex items-center gap-2 animate-in slide-in-from-left-4",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse shrink-0"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:R})]})}),e.jsx(ce,{initialScale:1,minScale:.1,maxScale:2,centerOnInit:!0,children:({zoomIn:n,zoomOut:l,resetTransform:d})=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{wrapperStyle:{width:"100%",height:"100%"},children:e.jsx("div",{className:"w-[4000px] h-[4000px] relative cursor-grab active:cursor-grabbing",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",style:{overflow:"visible"},children:t.map((S,X)=>e.jsx("div",{className:"absolute",style:{left:0,top:0},children:e.jsx(Me,{value:S,index:X,highlightedIndices:$})},X))})})}),e.jsxs("div",{className:"absolute bottom-6 right-6 z-20 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>n(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white active:scale-90",children:e.jsx(de,{size:20})}),e.jsx("button",{onClick:()=>l(),className:"w-10 h-10 bg-white shadow-sm border border-slate-200 rounded-xl flex items-center justify-center text-slate-600 hover:bg-white active:scale-90",children:e.jsx(xe,{size:20})}),e.jsx("button",{onClick:()=>d(),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center shadow-lg active:scale-90 mt-2",children:e.jsx(ue,{size:20})})]})]})})]}),e.jsxs("div",{className:"bg-white border-t border-slate-200 p-3 sm:p-4 flex flex-col lg:flex-row gap-4 lg:gap-4 items-stretch overflow-visible shadow-[0_-10px_40px_rgba(0,0,0,0.03)] z-[100]",children:[e.jsxs(T,{label:"Operations",className:"w-full lg:w-[320px]",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 w-full",children:[e.jsxs("div",{className:"flex gap-2 items-center bg-white p-1 rounded-xl border border-slate-200 flex-grow overflow-hidden shadow-sm",children:[e.jsx("input",{value:P,onChange:n=>U(n.target.value),onKeyDown:n=>n.key==="Enter"&&_(),className:"flex-grow min-w-0 px-2 text-xs font-bold outline-none text-center",placeholder:"Val"}),e.jsx("button",{onClick:_,disabled:f,className:"px-4 py-1.5 bg-blue-600 text-white rounded-lg text-[11px] font-black shadow-md shrink-0 active:scale-95 transition-all",children:"INSERT"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:ae,disabled:f,className:"px-3 py-2.5 bg-blue-500 text-white rounded-xl text-[9px] font-black shadow-lg flex flex-col items-center justify-center gap-0.5 active:scale-95 transition-all shrink-0 w-16",children:[e.jsx(me,{size:12})," EXTRACT MIN"]}),e.jsxs("button",{onClick:ne,disabled:f,className:"px-3 py-2.5 bg-red-500 text-white rounded-xl text-[9px] font-black shadow-lg flex flex-col items-center justify-center gap-0.5 active:scale-95 transition-all shrink-0 w-16",children:[e.jsx(fe,{size:12})," EXTRACT MAX"]})]})]}),e.jsxs("button",{onClick:ie,disabled:f,className:`w-full flex items-center justify-center gap-2 py-1.5 border border-dashed text-[10px] font-black rounded-lg transition-all uppercase tracking-widest ${b?"bg-red-600 border-red-600 text-white animate-bounce":"border-slate-200 text-slate-400 hover:bg-red-50 hover:text-red-500"}`,children:[e.jsx(ge,{size:12,className:b?"animate-spin":""})," ",b?"Confirm Reset?":"Reset Playground"]})]}),e.jsx(T,{label:"Timeline",className:"flex-grow",metadata:`Step ${Math.max(0,p+1)} / ${o.length}`,children:e.jsx(be,{isPlaying:f,isPaused:!f,onTogglePause:()=>f?N():O(o.length,p),onGoToStep:E,currentStep:p,totalSteps:o.length,onUndo:()=>E(Math.max(0,p-1)),onRedo:()=>E(Math.min(o.length-1,p+1)),canUndo:p>0,canRedo:p<o.length-1,playbackSpeed:D,setPlaybackSpeed:q})}),e.jsx(T,{label:"Array Representation",className:"w-full lg:w-[250px] shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto pb-2 custom-scrollbar no-pan h-full",children:[t.map((n,l)=>e.jsxs("div",{className:`flex flex-col items-center shrink-0 group ${$.includes(l)?"scale-110":""} transition-all`,children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded border text-xs font-bold ${$.includes(l)?"bg-amber-100 border-amber-500 text-amber-900":Math.floor(Math.log2(l+1))%2===0?"bg-blue-50 border-blue-200 text-blue-700":"bg-red-50 border-red-200 text-red-700"}`,children:n}),e.jsx("span",{className:"text-[9px] text-slate-500 font-mono font-bold",children:l})]},l)),t.length===0&&e.jsx("span",{className:"text-xs text-slate-400 italic px-2",children:"Empty Heap"})]})})]})]})]})};export{Ce as MinMaxHeapPage};
