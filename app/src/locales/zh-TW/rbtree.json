{
  "title": "紅黑樹",
  "description": "一種基於顏色平衡的自平衡二元搜尋樹",
  "tutorial": {
    "title": "紅黑樹互動教學",
    "welcome": "從零開始學習紅黑樹！本課程會一步步帶你理解所有概念和操作。",
    "menuTitle": "課程大綱",
    "phases": {
      "phase1": "📚 基礎知識",
      "phase2": "➕ 插入操作",
      "phase3": "➖ 刪除操作",
      "phase4": "🎓 綜合挑戰"
    },
    "levels": {
      "basics": {
        "title": "什麼是紅黑樹？",
        "desc": "歡迎！讓我們從最基本的概念開始。\n\n**紅黑樹**是一種特殊的「二元搜尋樹」（BST），它能**自動保持平衡**。\n\n💡 **什麼是二元搜尋樹？**\n每個節點最多有兩個子節點，左邊的值比較小，右邊的值比較大。\n\n💡 **為什麼需要平衡？**\n如果樹長得歪歪的（像一條直線），搜尋就會變慢。平衡的樹能保證快速搜尋！\n\n**紅黑樹的五個性質：**\n1. 每個節點是**紅色**或**黑色**\n2. **根節點**永遠是**黑色**\n3. **每個 NULL 葉節點**（空的子節點）視為**黑色**\n4. **紅色節點的子節點**必須是**黑色**（不能紅紅相鄰）\n5. 從任一節點到葉子的所有路徑，**黑色節點數量相同**\n\n💡 **重要概念：NIL 節點**\n當一個節點沒有左子或右子時，那個位置被視為一個**看不見的黑色 NIL 節點**。\n這很重要，因為計算「黑色高度」時要把 NIL 算進去！\n\n**觀察右邊的範例樹，理解後點擊「我了解了」繼續。**"
      },
      "colors": {
        "title": "顏色的意義",
        "desc": "現在你知道紅黑樹有兩種顏色了。但**為什麼需要顏色**呢？\n\n**顏色的功能：**\n- **黑色**節點：稱為「穩定」節點，像是樹的骨架\n- **紅色**節點：稱為「彈性」節點，可以在調整時被「借用」\n\n**最重要的規則：紅紅不能相鄰！**\n- 如果一個紅色節點的父親也是紅色，就違規了\n- 這條規則確保樹不會長太歪\n\n**觀察範例樹：**\n- 找找看有沒有紅色節點的父親也是紅色？\n- 如果沒有，表示這棵樹是合法的！\n\n在後面的課程中，你會學習如何修復「紅紅相鄰」的違規。"
      },
      "black_height": {
        "title": "黑色高度",
        "desc": "這是紅黑樹最核心的概念之一！\n\n**什麼是「黑色高度」？**\n從一個節點走到最底下的葉子，路上經過多少個**黑色**節點，就是黑色高度。\n\n💡 **重要：葉子的子節點（NULL）也算黑色！**\n每個葉子節點（沒有子節點的節點）的左右子節點位置，雖然看不見，但都被視為**黑色的 NIL 節點**。\n計算黑色高度時，這些看不見的 NIL 也要算進去！\n\n**關鍵規則：所有路徑的黑色高度必須相同！**\n- 從根節點出發，不管走左邊還是右邊\n- 到達任何葉子時，經過的黑色節點數量都一樣（包含最後的 NIL）\n\n💡 **為什麼這很重要？**\n這條規則保證樹不會一邊很深、一邊很淺，確保搜尋效率！\n\n**練習：**\n觀察右邊的樹，試著數一下：\n1. 從根走最左邊那條路，有幾個黑色節點？\n2. 從根走最右邊那條路，有幾個黑色節點？\n3. 兩個數字應該要一樣！"
      },
      "rotations": {
        "title": "旋轉操作",
        "desc": "**旋轉**是修復紅黑樹違規的關鍵技術！\n\n💡 **什麼是旋轉？**\n把樹「轉一下」，改變節點的父子關係，但不改變它們的大小順序。\n\n**兩種旋轉：**\n- **左旋**：把節點往左邊轉\n- **右旋**：把節點往右邊轉\n\n**如何操作：**\n在這個練習場中，你可以**拖曳節點**來執行旋轉：\n- 用滑鼠拖曳一個節點往左 = 左旋\n- 用滑鼠拖曳一個節點往右 = 右旋\n\n**現在試試看：**\n1. 找到樹中的某個節點\n2. 用滑鼠拖曳它往左或往右\n3. 觀察樹的結構如何改變\n\n這個技能在後面的課程中會經常用到！"
      },
      "foundation_quiz": {
        "title": "基礎測驗",
        "desc": "恭喜你學完基礎知識！讓我們來測試一下。\n\n請觀察右邊的範例樹，回答以下問題：\n\n💡 **記住：**葉子節點的 NULL 子節點也算黑色！",
        "question": "這棵樹的「黑色高度」是多少？（從根節點到任何葉子，經過幾個黑色節點？記得包含最後的 NIL）"
      },
      "insert_case0": {
        "title": "簡單插入（無違規）",
        "desc": "現在開始學習插入操作！\n\n**插入的基本規則：**\n新插入的節點**永遠是紅色**。為什麼？\n- 如果插入黑色，會立刻破壞「黑色高度相同」規則\n- 插入紅色比較安全，頂多違反「紅紅不相鄰」\n\n**最簡單的情況：**\n如果新節點的父親是**黑色**，那就沒問題！不需要任何修復。\n\n**你的任務：**\n1. 在下方輸入框輸入 **3**，點擊「插入」\n2. 觀察右側的**演算法日誌**，看看系統如何處理插入\n\n💡 系統會自動切換到「Auto」模式，讓你觀察整個插入過程。"
      },
      "insert_case1_1": {
        "title": "插入情況 1-1：叔叔是紅色（內部變色）",
        "desc": "我們來看看不必旋轉的修復情況！\n\n**對應 Wiki 插入情況：Case 1**\n\n**情境：**\n- 你的父親是紅色，叔叔也是紅色\n- 這時候只需要**重新著色**\n\n**修復方法：**\n1. 把父親變成**黑色**\n2. 把叔叔變成**黑色**\n3. 把祖父變成**紅色**\n\n這樣做會把紅色「往上推」一層。在這個練習中，祖父變成紅色後，因為他的父親是黑色（根節點），所以不會產生新的衝突。\n\n**你的任務：**\n1. 插入 **5**\n2. 點擊相關節點進行變色\n3. 觀察祖父節點變成紅色"
      },
      "insert_case1_2": {
        "title": "插入情況 1-2：叔叔是紅色（根修復）",
        "desc": "如果紅色推到了根節點呢？\n\n**對應 Wiki 插入情況：Case 1**\n\n**情境：**\n- 同樣是父紅、叔紅\n- 但是祖父是**根節點 (Root)**\n\n**修復方法：**\n1. 一樣先做：父黑、叔黑、祖父紅\n2. **關鍵差別：** 根節點必須永遠是**黑色**！\n3. 所以最後要把根節點再變回**黑色**\n\n這是紅黑樹高度增加的唯一方式（黑色高度 +1）。\n\n**你的任務：**\n1. 插入 **1**\n2. 處理紅紅衝突\n3. 注意根節點變成紅色後的處理"
      },
      "insert_case2_1": {
        "title": "插入情況 2-1：左左直線",
        "desc": "當叔叔是黑色，且形成**直線**（不是三角形）時：\n\n**對應 Wiki 插入情況：Case 2 (Line)**\n\n**這個情況的形狀：直線**\n- 新節點是父親的**左**子\n- 父親是祖父的**左**子\n- 形成一個「左-左」的直線\n\n**修復方法：**\n1. 把父親變成**黑色**\n2. 把祖父變成**紅色**\n3. 對**祖父**做**右旋**\n\n💡 記住：先變色，再旋轉！\n\n**你的任務：**\n1. 插入 **5**\n2. 觀察直線形狀: 15(祖父) -> 10(父) -> 5(新)\n3. 按照提示執行：變色 → 旋轉"
      },
      "insert_case2_2": {
        "title": "插入情況 2-2：右右直線",
        "desc": "這是情況 2-1 的鏡像版本！\n\n**對應 Wiki 插入情況：Case 2 (Line)**\n\n**這個情況的形狀：直線**\n- 新節點是父親的**右**子\n- 父親是祖父的**右**子\n- 形成一個「右-右」的直線\n\n**修復方法：**\n1. 把父親變成**黑色**\n2. 把祖父變成**紅色**\n3. 對**祖父**做**左旋**\n\n**你的任務：**\n1. 插入 **25**\n2. 觀察形成的直線: 15(祖父) -> 20(父) -> 25(新)\n3. 執行修復步驟"
      },
      "insert_case3_1": {
        "title": "插入情況 3-1：左右三角形",
        "desc": "當叔叔是**黑色（或不存在）**時，就需要旋轉了！\n\n**對應 Wiki 插入情況：Case 3 (Triangle)**\n\n**這個情況的形狀：三角形（之字形）**\n- 新節點是父親的**右**子\n- 父親是祖父的**左**子\n- 形成一個「左-右」的之字形\n\n**修復方法（兩步驟）：**\n1. 先對**父親**做**左旋**（把三角形變成直線）\n2. 然後處理變成的直線情況（下一課會詳細講）\n\n**你的任務：**\n1. 插入 **7**\n2. 觀察形狀: 10(祖父) -> 5(左父) -> 7(右子)\n3. 使用「顯示提示」跟著步驟修復"
      },
      "insert_case3_2": {
        "title": "插入情況 3-2：右左三角形",
        "desc": "這是情況 3-1 的鏡像版本！\n\n**對應 Wiki 插入情況：Case 3 (Triangle)**\n\n**這個情況的形狀：三角形（之字形）**\n- 新節點是父親的**左**子\n- 父親是祖父的**右**子\n- 形成一個「右-左」的之字形\n\n**修復方法（兩步驟）：**\n1. 先對**父親**做**右旋**（把三角形變成直線）\n2. 然後處理變成的直線情況\n\n**你的任務：**\n1. 插入 **22**\n2. 觀察形狀: 20(祖父) -> 25(右父) -> 22(左子)\n3. 跟著提示修復"
      },
      "insert_challenge": {
        "title": "插入綜合挑戰",
        "desc": "是時候驗收成果了！這個挑戰將連續測試你學到的所有三種情況。\n\n**請依照順序插入以下數字：**\n\n1. **基礎建立：** 20, 10, 30\n2. **情況 1 (叔叔紅)：** 插入 **5**\n3. **情況 2 (直線)：** 插入 **4**\n4. **準備下一步：** 插入 **40**\n5. **情況 3 (三角形)：** 插入 **35**\n\n完成後，你將擁有一棵包含所有修正類型的完美紅黑樹！"
      },
      "delete_red_leaf": {
        "title": "刪除紅色葉節點",
        "desc": "現在開始學習刪除操作！\n\n**刪除的複雜度：**\n刪除比插入更複雜，因為要考慮被刪除節點的顏色和子節點情況。\n\n**最簡單的情況：刪除紅色葉節點**\n- 「葉節點」：沒有任何子節點的節點\n- 刪除紅色節點**不會影響黑色高度**\n- 所以直接刪除就好，不需要修復！\n\n**你的任務：**\n1. 找到節點 **5**（應該是紅色的葉節點）\n2. 輸入 **5** 並點擊「刪除」\n3. 觀察：刪除後樹還是合法的！"
      },
      "delete_red_replacement": {
        "title": "刪除黑節點（紅色替換）",
        "desc": "如果要刪除的是**黑色**節點呢？\n\n**這個情況：黑色節點有紅色子節點**\n- 刪除黑色節點會減少黑色高度（違規！）\n- 但如果它有紅色子節點，這個子節點會「替換」上來\n- 只要把這個**紅色替換節點變成黑色**就行了！\n\n💡 **為什麼這樣有效？**\n原本那個位置是黑色，替換後還是黑色，黑色高度不變。\n\n**你的任務：**\n1. 找到節點 **5**（它是黑色，但有紅色子節點 2）\n2. 刪除 **5**\n3. 點擊提示，把替換上來的節點（2）變成黑色"
      },
      "delete_case1": {
        "title": "刪除情況 1：兄弟是紅色",
        "desc": "當刪除黑色節點後，可能產生「雙黑」問題。\n\n**對應 Wiki 刪除情況：Case 1**\n\n💡 **什麼是雙黑？**\n刪除黑色節點後，那個位置「少了一個黑色」，需要從別處「借」一個來補。\n\n**情況 1：兄弟節點是紅色**\n- 「兄弟」是你的父親的另一個子節點\n- 如果兄弟是紅色，我們需要先把它變成黑色的情況\n\n**修復方法：**\n1. 把兄弟變成**黑色**\n2. 把父親變成**紅色**\n3. 對父親旋轉\n4. 繼續處理（可能變成情況 2、3 或 4）\n\n**你的任務：**\n按照提示刪除 **10** 並修復"
      },
      "delete_case2": {
        "title": "刪除情況 2：全黑家族",
        "desc": "當兄弟和它的兩個孩子都是黑色時：\n\n**對應 Wiki 刪除情況：Case 2**\n\n**情況描述：**\n- 兄弟是**黑色**\n- 兄弟的兩個子節點（如果有）也都是**黑色**\n- 沒有紅色節點可以「借用」\n\n**修復方法：**\n把兄弟變成**紅色**\n\n💡 **這樣做的效果：**\n- 兩邊都「少一個黑」，相對平衡了\n- 但問題上移到父節點，可能需要繼續處理\n\n**你的任務：**\n刪除 **10** 並觀察修復過程"
      },
      "delete_case3": {
        "title": "刪除情況 3：近侄子紅色",
        "desc": "當兄弟是黑色，且**靠近我們**的那個侄子是紅色時：\n\n**對應 Wiki 刪除情況：Case 3**\n\n💡 **什麼是「近侄子」和「遠侄子」？**\n- 「近侄子」：兄弟的子節點中，離我們比較近的那個\n- 「遠侄子」：兄弟的子節點中，離我們比較遠的那個\n\n**情況描述：**\n- 兄弟是**黑色**\n- 近侄子是**紅色**\n- 遠侄子是**黑色**（或不存在）\n\n**修復方法：**\n1. 把近侄子變成**黑色**\n2. 把兄弟變成**紅色**\n3. 對兄弟旋轉\n4. 這會變成情況 4，繼續處理\n\n**你的任務：**\n刪除 **10** 並跟著提示修復"
      },
      "delete_case4": {
        "title": "刪除情況 4：遠侄子紅色",
        "desc": "這是刪除修復的**終止情況**！\n\n**對應 Wiki 刪除情況：Case 4**\n\n**情況描述：**\n- 兄弟是**黑色**\n- 遠侄子是**紅色**\n\n**修復方法：**\n1. **把兄弟的顏色設成和父親一樣**\n2. 把父親變成**黑色**\n3. 把遠侄子變成**黑色**\n4. 對父親旋轉\n\n✅ **做完這些，修復就結束了！**\n\n這是最重要的情況，一定要記住！\n\n**你的任務：**\n刪除 **10** 並完成修復"
      },
      "delete_challenge": {
        "title": "刪除綜合挑戰",
        "desc": "恭喜你學完所有刪除情況！\n\n現在來一個不看提示的挑戰：\n\n**任務：**\n1. 刪除 **25**\n2. 刪除 **75**\n3. 自己判斷需要什麼修復\n4. 執行修復使樹恢復合法狀態\n\n💡 記住刪除的情況：\n- 紅色葉節點：直接刪\n- 有紅色替換：替換後變黑\n- 情況 1-4：根據兄弟和侄子的顏色判斷"
      },
      "final_challenge": {
        "title": "最終挑戰",
        "desc": "你已經學會了紅黑樹的所有操作！\n\n**終極挑戰：混合操作**\n\n不看任何提示，完成以下任務：\n\n1. 插入 **5**（修復所有違規）\n2. 插入 **25**（修復所有違規）\n3. 刪除 **10**（修復所有違規）\n\n確保最終樹是完全合法的：\n- 沒有紅紅相鄰\n- 所有路徑黑色高度相同\n\n你可以了嗎？💪"
      },
      "graduation": {
        "title": "🎓 恭喜畢業！",
        "desc": "**太棒了！你已經精通紅黑樹了！** 🎉\n\n**你學到了什麼：**\n\n✅ **基礎知識**\n- 紅黑樹的五個性質\n- 顏色的意義和作用\n- 黑色高度的概念\n- 旋轉操作\n\n✅ **插入操作**\n- 情況 1：叔叔是紅色 → 重新著色\n- 情況 2/3：三角形 → 先旋轉成直線\n- 情況 4/5：直線 → 變色 + 旋轉\n\n✅ **刪除操作**\n- 紅色葉節點：直接刪\n- 紅色替換：變黑\n- 情況 1-4：複雜的修復流程\n\n**接下來呢？**\n繼續在「手動模式」中練習，或把這些知識應用到實際的程式設計中！\n\n感謝你的學習，祝你程式設計順利！ 🚀"
      }
    },
    "next": "下一關",
    "reset": "重置關卡",
    "finishBtn": "完成課程",
    "quiz": {
      "submit": "提交",
      "correct": "正確！",
      "wrong": "再試一次！"
    }
  },
  "guide": {
    "helpTitle": "紅黑樹說明",
    "helpDesc": "紅黑樹是一種自平衡二元搜尋樹，每個節點都有一個額外的顏色位元（紅色或黑色）。",
    "helpRecolor": "重新著色",
    "helpRecolorDesc": "點擊節點可切換**紅色**與**黑色**。這是修復違規的第一步，通常配合旋轉使用。",
    "helpRotate": "旋轉操作",
    "helpRotateDesc": "拖曳節點來旋轉樹狀結構。向**左**拖曳進行左旋（右子上升），向**右**拖曳進行右旋（左子上升）。",
    "showHint": "💡 顯示提示",
    "caseRootRed": "根節點是紅色",
    "actionRootRed": "點擊節點 **{{val}}** 將其顏色切換為**黑色**。根節點必須永遠是黑色。",
    "caseUncleRed": "叔叔是紅色（重新著色）",
    "actionUncleRed": "點擊節點 **{{parentVal}}**、**{{uncleVal}}** 和 **{{gpVal}}** 進行重新著色。父節點和叔叔變黑色，祖父變紅色。",
    "caseLLBlack": "LL 情況（右旋轉）",
    "actionLLBlack": "先重新著色：**{{parentVal}}** → 黑色，**{{gpVal}}** → 紅色。然後拖動 **{{gpVal}}** 向**右**旋轉。",
    "caseRRBlack": "RR 情況（左旋轉）",
    "actionRRBlack": "先重新著色：**{{parentVal}}** → 黑色，**{{gpVal}}** → 紅色。然後拖動 **{{gpVal}}** 向**左**旋轉。",
    "caseLRBlack": "LR 情況（雙重旋轉）",
    "actionLRBlack_step1": "拖動 **{{parentVal}}** 向**左**以轉換為 LL 情況。",
    "caseRLBlack": "RL 情況（雙重旋轉）",
    "actionRLBlack_step1": "拖動 **{{parentVal}}** 向**右**以轉換為 RR 情況。",
    "wrongNodeWarning": "錯誤的節點！您應該關注：",
    "step": "步驟",
    "focus": "目標",
    "remaining": "步驟概覽",
    "clickToRecolor": "點擊以重新著色",
    "dragToRotateLabel": "拖動以旋轉",
    "dragNode": "拖動節點",
    "toThe": "向",
    "dragToRotate": "拖動 {{val}} 向 {{dir}}",
    "wrongAction": "錯誤的操作！",
    "wrongDirection": "錯誤的方向！",
    "expected": "應執行",
    "clickNode": "點擊節點",
    "currentAction": "目前操作",
    "skippedRootStaysBlack": "略過：根節點必須保持黑色",
    "allStepsComplete": "修復完成",
    "showHintDelete": "顯示刪除修復提示",
    "deleteSimpleCase": "簡單情況：重新著色為黑色",
    "deleteCase1": "情況 1：兄弟是紅色",
    "deleteCase2": "情況 2：黑兄弟、黑侄子",
    "deleteCase3": "情況 3：黑兄弟、近侄子紅",
    "deleteCase4": "情況 4：黑兄弟、遠侄子紅",
    "alreadyCorrectColor": "略過：{{val}} 已經是{{color}}",
    "alreadyDone": "此步驟已完成",
    "skippedStep": "略過",
    "completedStep": "完成",
    "wikiReference": "Wiki 參考",
    "performAnyPending": "執行任何待處理的動作以繼續",
    "performRecolorFirst": "在旋轉前請先完成所有著色步驟",
    "ui": {
      "mode": "模式切換：Auto 模式會自動展示演算法步驟；Manual 模式則需您親手拖曳節點來執行旋轉。",
      "sidebar": "側邊欄：查看操作紀錄、Wiki 和教學",
      "canvas": "畫布操作：拖曳空白處移動，滾輪縮放",
      "action": "基本操作：新增、刪除節點，或重置畫布",
      "timeline": "時光機：暫停、播放、或拖曳滑桿回顧歷史",
      "start": "開始介面導覽",
      "startDesc": "透過互動式導覽，快速認識時間軸、操作區與畫布控制。",
      "startBtn": "開始導覽"
    },
    "manual": {
      "drag": "拖動節點以旋轉。",
      "click": "點擊節點以切換顏色。",
      "violation": "修正標記的違規！"
    }
  },
  "wiki": {
    "concept": "1. 什麼是紅黑樹？",
    "conceptDesc": "紅黑樹是一種二元搜尋樹，每個節點多儲存了一個位元來表示顏色（紅或黑）。透過限制從根到葉子的任何路徑上的顏色規則，確保沒有任何路徑會比其他路徑長兩倍以上，從而保持樹的平衡。",
    "nilNodes": "2. 外部節點（NIL 節點）",
    "nilNodesDesc": "**NIL 節點**（外部節點）是紅黑樹的重要概念：\n\n- 每個 `null` 子節點指標被視為**黑色的 NIL 節點**\n- 葉節點（沒有子節點的節點）實際上有兩個黑色 NIL 子節點\n- NIL 節點**不佔用記憶體**，只是概念上的存在\n\n**為什麼重要：**\n- 計算黑高時要包含 NIL 節點\n- 紅色節點可以有 NIL 子節點（因為它們是黑色的）\n- 刪除黑色節點時，NIL 替代節點會產生「雙黑」問題\n\n**在此練習場中：** 我們不會視覺化顯示 NIL 節點，但演算法會將空缺的子節點視為黑色節點處理。",
    "properties": "3. 紅黑樹性質",
    "propertiesDesc": "有效的紅黑樹必須滿足這五個性質：\n\n1. **根性質**：根節點永遠是**黑色**\n2. **外部性質**：所有 NULL 葉節點（外部節點）視為**黑色**\n3. **紅色性質**：如果一個節點是**紅色**，其兩個子節點必須是**黑色**（不能有兩個連續的紅色節點）\n4. **黑高性質**：從任一節點到其所有後代 NULL 節點的路徑上，包含相同數量的**黑色**節點（黑色高度）\n5. **二元搜尋樹性質**：對於任意節點，左子樹所有值 < 節點值 < 右子樹所有值",
    "blackHeight": "4. 黑色高度 (Black Height)",
    "blackHeightDesc": "**黑色高度**是指從一個節點到其葉子節點（不包含該節點本身）的路徑上黑色節點的數量。\n\n**為什麼重要：**\n- 從任意節點到其所有後代葉子的路徑必須具有相同的黑色高度（性質 5）。\n- 插入與刪除操作的核心就是保持這個性質（或透過旋轉/變色來修復它）。\n- 刪除黑色節點會減少該路徑的黑色高度，產生違規。",
    "insertion": "5. 插入演算法",
    "insertionDesc": "新節點總是插入為**紅色**。然後修復違規：\n\n**Case 1: 叔叔是紅色**\n- **動作**: 將父/叔變黑，祖父變紅。\n- **原因**: 將紅色向上推，不影響黑色高度。\n\n**Case 2: 叔叔是黑色 (直線)**\n- **動作**: 先變色 (父→黑, 祖父→紅)，再旋轉祖父。\n- **原因**: 局部平衡高度。\n\n**Case 3: 叔叔是黑色 (三角形)**\n- **動作**: 旋轉父親形成直線 (Case 2)，然後修復 Case 2。",
    "deletion": "6. 刪除演算法",
    "deletionDesc": "刪除比插入更複雜，涉及節點替換和修復：\n\n**步驟 1：標準 BST 刪除**\n- 若節點有 **0 或 1 個子節點**：用子節點替換\n- 若節點有 **2 個子節點**：用中序前驅/後繼替換，然後刪除該節點\n\n**重要：如果被刪除的節點是紅色，不需要修復！** 刪除紅色節點不會違反任何性質。\n\n**步驟 2：修復違反（僅當被刪除的節點是黑色時）**\n\n**情況 1：兄弟是紅色**\n- 重新著色：兄弟 → **黑色**、父節點 → **紅色**\n- 對父節點旋轉，轉換為情況 2/3/4\n\n**情況 2：兄弟是黑色，兩個侄子節點都是黑色**\n- 重新著色：兄弟 → **紅色**\n- 問題向上傳遞至父節點\n\n**情況 3：兄弟是黑色，近侄子是紅色，遠侄子是黑色**\n- 重新著色：近侄子 → **黑色**、兄弟 → **紅色**\n- 對兄弟旋轉，轉換為情況 4\n\n**情況 4：兄弟是黑色，遠侄子是紅色**\n- **複製父節點的顏色到兄弟**\n- 重新著色：父節點 → **黑色**、遠侄子 → **黑色**\n- 對父節點旋轉，完成\n\n每次刪除**最多需要 3 次旋轉**。",
    "complexity": "7. 時間複雜度",
    "complexityDesc": "| 操作 | 平均 | 最差 |\n|------|------|------|\n| 搜尋 | O(log n) | O(log n) |\n| 插入 | O(log n) | O(log n) |\n| 刪除 | O(log n) | O(log n) |\n\n**空間複雜度**：O(n) 儲存 n 個節點\n\n**相較於 AVL 樹的優勢**：\n- 插入/刪除時旋轉次數更少（更新更快）\n- 實作更簡單\n- 適合插入/刪除頻繁的場景\n\n**與 AVL 比較**：\n- AVL 更嚴格平衡（適合搜尋為主的場景）\n- 紅黑樹適合混合操作（實務資料庫應用）"
  },
  "bottomBar": {
    "operations": "操作",
    "timeline": "時間軸"
  }
}